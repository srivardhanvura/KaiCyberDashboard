{"version":3,"file":"static/js/250.f26b7297.chunk.js","mappings":"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","sources":["../node_modules/dexie/dist/dexie.js","../node_modules/dexie/import-wrapper-prod.mjs"],"sourcesContent":["/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 4.2.1, Sat Oct 04 2025\n *\n * https://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n \n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Dexie = factory());\n})(this, (function () { 'use strict';\n\n    /*! *****************************************************************************\n    Copyright (c) Microsoft Corporation.\n    Permission to use, copy, modify, and/or distribute this software for any\n    purpose with or without fee is hereby granted.\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n    PERFORMANCE OF THIS SOFTWARE.\n    ***************************************************************************** */\n    var extendStatics = function(d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    function __extends(d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    }\n    var __assign = function() {\n        __assign = Object.assign || function __assign(t) {\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n            }\n            return t;\n        };\n        return __assign.apply(this, arguments);\n    };\n    function __spreadArray(to, from, pack) {\n        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n            if (ar || !(i in from)) {\n                if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n                ar[i] = from[i];\n            }\n        }\n        return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var _global = typeof globalThis !== 'undefined' ? globalThis :\n        typeof self !== 'undefined' ? self :\n            typeof window !== 'undefined' ? window :\n                global;\n\n    var keys = Object.keys;\n    var isArray = Array.isArray;\n    if (typeof Promise !== 'undefined' && !_global.Promise) {\n        _global.Promise = Promise;\n    }\n    function extend(obj, extension) {\n        if (typeof extension !== 'object')\n            return obj;\n        keys(extension).forEach(function (key) {\n            obj[key] = extension[key];\n        });\n        return obj;\n    }\n    var getProto = Object.getPrototypeOf;\n    var _hasOwn = {}.hasOwnProperty;\n    function hasOwn(obj, prop) {\n        return _hasOwn.call(obj, prop);\n    }\n    function props(proto, extension) {\n        if (typeof extension === 'function')\n            extension = extension(getProto(proto));\n        (typeof Reflect === \"undefined\" ? keys : Reflect.ownKeys)(extension).forEach(function (key) {\n            setProp(proto, key, extension[key]);\n        });\n    }\n    var defineProperty = Object.defineProperty;\n    function setProp(obj, prop, functionOrGetSet, options) {\n        defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n            { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n            { value: functionOrGetSet, configurable: true, writable: true }, options));\n    }\n    function derive(Child) {\n        return {\n            from: function (Parent) {\n                Child.prototype = Object.create(Parent.prototype);\n                setProp(Child.prototype, \"constructor\", Child);\n                return {\n                    extend: props.bind(null, Child.prototype)\n                };\n            }\n        };\n    }\n    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    function getPropertyDescriptor(obj, prop) {\n        var pd = getOwnPropertyDescriptor(obj, prop);\n        var proto;\n        return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n    }\n    var _slice = [].slice;\n    function slice(args, start, end) {\n        return _slice.call(args, start, end);\n    }\n    function override(origFunc, overridedFactory) {\n        return overridedFactory(origFunc);\n    }\n    function assert(b) {\n        if (!b)\n            throw new Error(\"Assertion Failed\");\n    }\n    function asap$1(fn) {\n        if (_global.setImmediate)\n            setImmediate(fn);\n        else\n            setTimeout(fn, 0);\n    }\n    function arrayToObject(array, extractor) {\n        return array.reduce(function (result, item, i) {\n            var nameAndValue = extractor(item, i);\n            if (nameAndValue)\n                result[nameAndValue[0]] = nameAndValue[1];\n            return result;\n        }, {});\n    }\n    function getByKeyPath(obj, keyPath) {\n        if (typeof keyPath === 'string' && hasOwn(obj, keyPath))\n            return obj[keyPath];\n        if (!keyPath)\n            return obj;\n        if (typeof keyPath !== 'string') {\n            var rv = [];\n            for (var i = 0, l = keyPath.length; i < l; ++i) {\n                var val = getByKeyPath(obj, keyPath[i]);\n                rv.push(val);\n            }\n            return rv;\n        }\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var innerObj = obj[keyPath.substr(0, period)];\n            return innerObj == null ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n        }\n        return undefined;\n    }\n    function setByKeyPath(obj, keyPath, value) {\n        if (!obj || keyPath === undefined)\n            return;\n        if ('isFrozen' in Object && Object.isFrozen(obj))\n            return;\n        if (typeof keyPath !== 'string' && 'length' in keyPath) {\n            assert(typeof value !== 'string' && 'length' in value);\n            for (var i = 0, l = keyPath.length; i < l; ++i) {\n                setByKeyPath(obj, keyPath[i], value[i]);\n            }\n        }\n        else {\n            var period = keyPath.indexOf('.');\n            if (period !== -1) {\n                var currentKeyPath = keyPath.substr(0, period);\n                var remainingKeyPath = keyPath.substr(period + 1);\n                if (remainingKeyPath === \"\")\n                    if (value === undefined) {\n                        if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n                            obj.splice(currentKeyPath, 1);\n                        else\n                            delete obj[currentKeyPath];\n                    }\n                    else\n                        obj[currentKeyPath] = value;\n                else {\n                    var innerObj = obj[currentKeyPath];\n                    if (!innerObj || !hasOwn(obj, currentKeyPath))\n                        innerObj = (obj[currentKeyPath] = {});\n                    setByKeyPath(innerObj, remainingKeyPath, value);\n                }\n            }\n            else {\n                if (value === undefined) {\n                    if (isArray(obj) && !isNaN(parseInt(keyPath)))\n                        obj.splice(keyPath, 1);\n                    else\n                        delete obj[keyPath];\n                }\n                else\n                    obj[keyPath] = value;\n            }\n        }\n    }\n    function delByKeyPath(obj, keyPath) {\n        if (typeof keyPath === 'string')\n            setByKeyPath(obj, keyPath, undefined);\n        else if ('length' in keyPath)\n            [].map.call(keyPath, function (kp) {\n                setByKeyPath(obj, kp, undefined);\n            });\n    }\n    function shallowClone(obj) {\n        var rv = {};\n        for (var m in obj) {\n            if (hasOwn(obj, m))\n                rv[m] = obj[m];\n        }\n        return rv;\n    }\n    var concat = [].concat;\n    function flatten(a) {\n        return concat.apply([], a);\n    }\n    var intrinsicTypeNames = \"BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\"\n        .split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return [\"Int\", \"Uint\", \"Float\"].map(function (t) { return t + num + \"Array\"; }); }))).filter(function (t) { return _global[t]; });\n    var intrinsicTypes = new Set(intrinsicTypeNames.map(function (t) { return _global[t]; }));\n    function cloneSimpleObjectTree(o) {\n        var rv = {};\n        for (var k in o)\n            if (hasOwn(o, k)) {\n                var v = o[k];\n                rv[k] = !v || typeof v !== 'object' || intrinsicTypes.has(v.constructor) ? v : cloneSimpleObjectTree(v);\n            }\n        return rv;\n    }\n    function objectIsEmpty(o) {\n        for (var k in o)\n            if (hasOwn(o, k))\n                return false;\n        return true;\n    }\n    var circularRefs = null;\n    function deepClone(any) {\n        circularRefs = new WeakMap();\n        var rv = innerDeepClone(any);\n        circularRefs = null;\n        return rv;\n    }\n    function innerDeepClone(x) {\n        if (!x || typeof x !== 'object')\n            return x;\n        var rv = circularRefs.get(x);\n        if (rv)\n            return rv;\n        if (isArray(x)) {\n            rv = [];\n            circularRefs.set(x, rv);\n            for (var i = 0, l = x.length; i < l; ++i) {\n                rv.push(innerDeepClone(x[i]));\n            }\n        }\n        else if (intrinsicTypes.has(x.constructor)) {\n            rv = x;\n        }\n        else {\n            var proto = getProto(x);\n            rv = proto === Object.prototype ? {} : Object.create(proto);\n            circularRefs.set(x, rv);\n            for (var prop in x) {\n                if (hasOwn(x, prop)) {\n                    rv[prop] = innerDeepClone(x[prop]);\n                }\n            }\n        }\n        return rv;\n    }\n    var toString = {}.toString;\n    function toStringTag(o) {\n        return toString.call(o).slice(8, -1);\n    }\n    var iteratorSymbol = typeof Symbol !== 'undefined' ?\n        Symbol.iterator :\n        '@@iterator';\n    var getIteratorOf = typeof iteratorSymbol === \"symbol\" ? function (x) {\n        var i;\n        return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n    } : function () { return null; };\n    function delArrayItem(a, x) {\n        var i = a.indexOf(x);\n        if (i >= 0)\n            a.splice(i, 1);\n        return i >= 0;\n    }\n    var NO_CHAR_ARRAY = {};\n    function getArrayOf(arrayLike) {\n        var i, a, x, it;\n        if (arguments.length === 1) {\n            if (isArray(arrayLike))\n                return arrayLike.slice();\n            if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n                return [arrayLike];\n            if ((it = getIteratorOf(arrayLike))) {\n                a = [];\n                while ((x = it.next()), !x.done)\n                    a.push(x.value);\n                return a;\n            }\n            if (arrayLike == null)\n                return [arrayLike];\n            i = arrayLike.length;\n            if (typeof i === 'number') {\n                a = new Array(i);\n                while (i--)\n                    a[i] = arrayLike[i];\n                return a;\n            }\n            return [arrayLike];\n        }\n        i = arguments.length;\n        a = new Array(i);\n        while (i--)\n            a[i] = arguments[i];\n        return a;\n    }\n    var isAsyncFunction = typeof Symbol !== 'undefined'\n        ? function (fn) { return fn[Symbol.toStringTag] === 'AsyncFunction'; }\n        : function () { return false; };\n\n    var dexieErrorNames = [\n        'Modify',\n        'Bulk',\n        'OpenFailed',\n        'VersionChange',\n        'Schema',\n        'Upgrade',\n        'InvalidTable',\n        'MissingAPI',\n        'NoSuchDatabase',\n        'InvalidArgument',\n        'SubTransaction',\n        'Unsupported',\n        'Internal',\n        'DatabaseClosed',\n        'PrematureCommit',\n        'ForeignAwait'\n    ];\n    var idbDomErrorNames = [\n        'Unknown',\n        'Constraint',\n        'Data',\n        'TransactionInactive',\n        'ReadOnly',\n        'Version',\n        'NotFound',\n        'InvalidState',\n        'InvalidAccess',\n        'Abort',\n        'Timeout',\n        'QuotaExceeded',\n        'Syntax',\n        'DataClone'\n    ];\n    var errorList = dexieErrorNames.concat(idbDomErrorNames);\n    var defaultTexts = {\n        VersionChanged: \"Database version changed by other database connection\",\n        DatabaseClosed: \"Database has been closed\",\n        Abort: \"Transaction aborted\",\n        TransactionInactive: \"Transaction has already completed or failed\",\n        MissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\n    };\n    function DexieError(name, msg) {\n        this.name = name;\n        this.message = msg;\n    }\n    derive(DexieError).from(Error).extend({\n        toString: function () { return this.name + \": \" + this.message; }\n    });\n    function getMultiErrorMessage(msg, failures) {\n        return msg + \". Errors: \" + Object.keys(failures)\n            .map(function (key) { return failures[key].toString(); })\n            .filter(function (v, i, s) { return s.indexOf(v) === i; })\n            .join('\\n');\n    }\n    function ModifyError(msg, failures, successCount, failedKeys) {\n        this.failures = failures;\n        this.failedKeys = failedKeys;\n        this.successCount = successCount;\n        this.message = getMultiErrorMessage(msg, failures);\n    }\n    derive(ModifyError).from(DexieError);\n    function BulkError(msg, failures) {\n        this.name = \"BulkError\";\n        this.failures = Object.keys(failures).map(function (pos) { return failures[pos]; });\n        this.failuresByPos = failures;\n        this.message = getMultiErrorMessage(msg, this.failures);\n    }\n    derive(BulkError).from(DexieError);\n    var errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + \"Error\", obj); }, {});\n    var BaseException = DexieError;\n    var exceptions = errorList.reduce(function (obj, name) {\n        var fullName = name + \"Error\";\n        function DexieError(msgOrInner, inner) {\n            this.name = fullName;\n            if (!msgOrInner) {\n                this.message = defaultTexts[name] || fullName;\n                this.inner = null;\n            }\n            else if (typeof msgOrInner === 'string') {\n                this.message = \"\".concat(msgOrInner).concat(!inner ? '' : '\\n ' + inner);\n                this.inner = inner || null;\n            }\n            else if (typeof msgOrInner === 'object') {\n                this.message = \"\".concat(msgOrInner.name, \" \").concat(msgOrInner.message);\n                this.inner = msgOrInner;\n            }\n        }\n        derive(DexieError).from(BaseException);\n        obj[name] = DexieError;\n        return obj;\n    }, {});\n    exceptions.Syntax = SyntaxError;\n    exceptions.Type = TypeError;\n    exceptions.Range = RangeError;\n    var exceptionMap = idbDomErrorNames.reduce(function (obj, name) {\n        obj[name + \"Error\"] = exceptions[name];\n        return obj;\n    }, {});\n    function mapError(domError, message) {\n        if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n            return domError;\n        var rv = new exceptionMap[domError.name](message || domError.message, domError);\n        if (\"stack\" in domError) {\n            setProp(rv, \"stack\", { get: function () {\n                    return this.inner.stack;\n                } });\n        }\n        return rv;\n    }\n    var fullNameExceptions = errorList.reduce(function (obj, name) {\n        if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n            obj[name + \"Error\"] = exceptions[name];\n        return obj;\n    }, {});\n    fullNameExceptions.ModifyError = ModifyError;\n    fullNameExceptions.DexieError = DexieError;\n    fullNameExceptions.BulkError = BulkError;\n\n    function nop() { }\n    function mirror(val) { return val; }\n    function pureFunctionChain(f1, f2) {\n        if (f1 == null || f1 === mirror)\n            return f2;\n        return function (val) {\n            return f2(f1(val));\n        };\n    }\n    function callBoth(on1, on2) {\n        return function () {\n            on1.apply(this, arguments);\n            on2.apply(this, arguments);\n        };\n    }\n    function hookCreatingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            var res = f1.apply(this, arguments);\n            if (res !== undefined)\n                arguments[0] = res;\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = null;\n            this.onerror = null;\n            var res2 = f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n            return res2 !== undefined ? res2 : res;\n        };\n    }\n    function hookDeletingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            f1.apply(this, arguments);\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = this.onerror = null;\n            f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        };\n    }\n    function hookUpdatingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function (modifications) {\n            var res = f1.apply(this, arguments);\n            extend(modifications, res);\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = null;\n            this.onerror = null;\n            var res2 = f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n            return res === undefined ?\n                (res2 === undefined ? undefined : res2) :\n                (extend(res, res2));\n        };\n    }\n    function reverseStoppableEventChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            if (f2.apply(this, arguments) === false)\n                return false;\n            return f1.apply(this, arguments);\n        };\n    }\n    function promisableChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            var res = f1.apply(this, arguments);\n            if (res && typeof res.then === 'function') {\n                var thiz = this, i = arguments.length, args = new Array(i);\n                while (i--)\n                    args[i] = arguments[i];\n                return res.then(function () {\n                    return f2.apply(thiz, args);\n                });\n            }\n            return f2.apply(this, arguments);\n        };\n    }\n\n    var debug = typeof location !== 'undefined' &&\n        /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\n    function setDebug(value, filter) {\n        debug = value;\n    }\n\n    var INTERNAL = {};\n    var ZONE_ECHO_LIMIT = 100, _a$1 = typeof Promise === 'undefined' ?\n        [] :\n        (function () {\n            var globalP = Promise.resolve();\n            if (typeof crypto === 'undefined' || !crypto.subtle)\n                return [globalP, getProto(globalP), globalP];\n            var nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n            return [\n                nativeP,\n                getProto(nativeP),\n                globalP\n            ];\n        })(), resolvedNativePromise = _a$1[0], nativePromiseProto = _a$1[1], resolvedGlobalPromise = _a$1[2], nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\n    var NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\n    var patchGlobalPromise = !!resolvedGlobalPromise;\n    function schedulePhysicalTick() {\n        queueMicrotask(physicalTick);\n    }\n    var asap = function (callback, args) {\n        microtickQueue.push([callback, args]);\n        if (needsNewPhysicalTick) {\n            schedulePhysicalTick();\n            needsNewPhysicalTick = false;\n        }\n    };\n    var isOutsideMicroTick = true,\n    needsNewPhysicalTick = true,\n    unhandledErrors = [],\n    rejectingErrors = [],\n    rejectionMapper = mirror;\n    var globalPSD = {\n        id: 'global',\n        global: true,\n        ref: 0,\n        unhandleds: [],\n        onunhandled: nop,\n        pgp: false,\n        env: {},\n        finalize: nop\n    };\n    var PSD = globalPSD;\n    var microtickQueue = [];\n    var numScheduledCalls = 0;\n    var tickFinalizers = [];\n    function DexiePromise(fn) {\n        if (typeof this !== 'object')\n            throw new TypeError('Promises must be constructed via new');\n        this._listeners = [];\n        this._lib = false;\n        var psd = (this._PSD = PSD);\n        if (typeof fn !== 'function') {\n            if (fn !== INTERNAL)\n                throw new TypeError('Not a function');\n            this._state = arguments[1];\n            this._value = arguments[2];\n            if (this._state === false)\n                handleRejection(this, this._value);\n            return;\n        }\n        this._state = null;\n        this._value = null;\n        ++psd.ref;\n        executePromiseTask(this, fn);\n    }\n    var thenProp = {\n        get: function () {\n            var psd = PSD, microTaskId = totalEchoes;\n            function then(onFulfilled, onRejected) {\n                var _this = this;\n                var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n                var cleanup = possibleAwait && !decrementExpectedAwaits();\n                var rv = new DexiePromise(function (resolve, reject) {\n                    propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n                });\n                if (this._consoleTask)\n                    rv._consoleTask = this._consoleTask;\n                return rv;\n            }\n            then.prototype = INTERNAL;\n            return then;\n        },\n        set: function (value) {\n            setProp(this, 'then', value && value.prototype === INTERNAL ?\n                thenProp :\n                {\n                    get: function () {\n                        return value;\n                    },\n                    set: thenProp.set\n                });\n        }\n    };\n    props(DexiePromise.prototype, {\n        then: thenProp,\n        _then: function (onFulfilled, onRejected) {\n            propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n        },\n        catch: function (onRejected) {\n            if (arguments.length === 1)\n                return this.then(null, onRejected);\n            var type = arguments[0], handler = arguments[1];\n            return typeof type === 'function' ? this.then(null, function (err) {\n                return err instanceof type ? handler(err) : PromiseReject(err);\n            })\n                : this.then(null, function (err) {\n                    return err && err.name === type ? handler(err) : PromiseReject(err);\n                });\n        },\n        finally: function (onFinally) {\n            return this.then(function (value) {\n                return DexiePromise.resolve(onFinally()).then(function () { return value; });\n            }, function (err) {\n                return DexiePromise.resolve(onFinally()).then(function () { return PromiseReject(err); });\n            });\n        },\n        timeout: function (ms, msg) {\n            var _this = this;\n            return ms < Infinity ?\n                new DexiePromise(function (resolve, reject) {\n                    var handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);\n                    _this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n                }) : this;\n        }\n    });\n    if (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n        setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\n    globalPSD.env = snapShot();\n    function Listener(onFulfilled, onRejected, resolve, reject, zone) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n        this.psd = zone;\n    }\n    props(DexiePromise, {\n        all: function () {\n            var values = getArrayOf.apply(null, arguments)\n                .map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                if (values.length === 0)\n                    resolve([]);\n                var remaining = values.length;\n                values.forEach(function (a, i) { return DexiePromise.resolve(a).then(function (x) {\n                    values[i] = x;\n                    if (!--remaining)\n                        resolve(values);\n                }, reject); });\n            });\n        },\n        resolve: function (value) {\n            if (value instanceof DexiePromise)\n                return value;\n            if (value && typeof value.then === 'function')\n                return new DexiePromise(function (resolve, reject) {\n                    value.then(resolve, reject);\n                });\n            var rv = new DexiePromise(INTERNAL, true, value);\n            return rv;\n        },\n        reject: PromiseReject,\n        race: function () {\n            var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                values.map(function (value) { return DexiePromise.resolve(value).then(resolve, reject); });\n            });\n        },\n        PSD: {\n            get: function () { return PSD; },\n            set: function (value) { return PSD = value; }\n        },\n        totalEchoes: { get: function () { return totalEchoes; } },\n        newPSD: newScope,\n        usePSD: usePSD,\n        scheduler: {\n            get: function () { return asap; },\n            set: function (value) { asap = value; }\n        },\n        rejectionMapper: {\n            get: function () { return rejectionMapper; },\n            set: function (value) { rejectionMapper = value; }\n        },\n        follow: function (fn, zoneProps) {\n            return new DexiePromise(function (resolve, reject) {\n                return newScope(function (resolve, reject) {\n                    var psd = PSD;\n                    psd.unhandleds = [];\n                    psd.onunhandled = reject;\n                    psd.finalize = callBoth(function () {\n                        var _this = this;\n                        run_at_end_of_this_or_next_physical_tick(function () {\n                            _this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);\n                        });\n                    }, psd.finalize);\n                    fn();\n                }, zoneProps, resolve, reject);\n            });\n        }\n    });\n    if (NativePromise) {\n        if (NativePromise.allSettled)\n            setProp(DexiePromise, \"allSettled\", function () {\n                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n                return new DexiePromise(function (resolve) {\n                    if (possiblePromises.length === 0)\n                        resolve([]);\n                    var remaining = possiblePromises.length;\n                    var results = new Array(remaining);\n                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return results[i] = { status: \"fulfilled\", value: value }; }, function (reason) { return results[i] = { status: \"rejected\", reason: reason }; })\n                        .then(function () { return --remaining || resolve(results); }); });\n                });\n            });\n        if (NativePromise.any && typeof AggregateError !== 'undefined')\n            setProp(DexiePromise, \"any\", function () {\n                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n                return new DexiePromise(function (resolve, reject) {\n                    if (possiblePromises.length === 0)\n                        reject(new AggregateError([]));\n                    var remaining = possiblePromises.length;\n                    var failures = new Array(remaining);\n                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return resolve(value); }, function (failure) {\n                        failures[i] = failure;\n                        if (!--remaining)\n                            reject(new AggregateError(failures));\n                    }); });\n                });\n            });\n        if (NativePromise.withResolvers)\n            DexiePromise.withResolvers = NativePromise.withResolvers;\n    }\n    function executePromiseTask(promise, fn) {\n        try {\n            fn(function (value) {\n                if (promise._state !== null)\n                    return;\n                if (value === promise)\n                    throw new TypeError('A promise cannot be resolved with itself.');\n                var shouldExecuteTick = promise._lib && beginMicroTickScope();\n                if (value && typeof value.then === 'function') {\n                    executePromiseTask(promise, function (resolve, reject) {\n                        value instanceof DexiePromise ?\n                            value._then(resolve, reject) :\n                            value.then(resolve, reject);\n                    });\n                }\n                else {\n                    promise._state = true;\n                    promise._value = value;\n                    propagateAllListeners(promise);\n                }\n                if (shouldExecuteTick)\n                    endMicroTickScope();\n            }, handleRejection.bind(null, promise));\n        }\n        catch (ex) {\n            handleRejection(promise, ex);\n        }\n    }\n    function handleRejection(promise, reason) {\n        rejectingErrors.push(reason);\n        if (promise._state !== null)\n            return;\n        var shouldExecuteTick = promise._lib && beginMicroTickScope();\n        reason = rejectionMapper(reason);\n        promise._state = false;\n        promise._value = reason;\n        addPossiblyUnhandledError(promise);\n        propagateAllListeners(promise);\n        if (shouldExecuteTick)\n            endMicroTickScope();\n    }\n    function propagateAllListeners(promise) {\n        var listeners = promise._listeners;\n        promise._listeners = [];\n        for (var i = 0, len = listeners.length; i < len; ++i) {\n            propagateToListener(promise, listeners[i]);\n        }\n        var psd = promise._PSD;\n        --psd.ref || psd.finalize();\n        if (numScheduledCalls === 0) {\n            ++numScheduledCalls;\n            asap(function () {\n                if (--numScheduledCalls === 0)\n                    finalizePhysicalTick();\n            }, []);\n        }\n    }\n    function propagateToListener(promise, listener) {\n        if (promise._state === null) {\n            promise._listeners.push(listener);\n            return;\n        }\n        var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n        if (cb === null) {\n            return (promise._state ? listener.resolve : listener.reject)(promise._value);\n        }\n        ++listener.psd.ref;\n        ++numScheduledCalls;\n        asap(callListener, [cb, promise, listener]);\n    }\n    function callListener(cb, promise, listener) {\n        try {\n            var ret, value = promise._value;\n            if (!promise._state && rejectingErrors.length)\n                rejectingErrors = [];\n            ret = debug && promise._consoleTask ? promise._consoleTask.run(function () { return cb(value); }) : cb(value);\n            if (!promise._state && rejectingErrors.indexOf(value) === -1) {\n                markErrorAsHandled(promise);\n            }\n            listener.resolve(ret);\n        }\n        catch (e) {\n            listener.reject(e);\n        }\n        finally {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n            --listener.psd.ref || listener.psd.finalize();\n        }\n    }\n    function physicalTick() {\n        usePSD(globalPSD, function () {\n            beginMicroTickScope() && endMicroTickScope();\n        });\n    }\n    function beginMicroTickScope() {\n        var wasRootExec = isOutsideMicroTick;\n        isOutsideMicroTick = false;\n        needsNewPhysicalTick = false;\n        return wasRootExec;\n    }\n    function endMicroTickScope() {\n        var callbacks, i, l;\n        do {\n            while (microtickQueue.length > 0) {\n                callbacks = microtickQueue;\n                microtickQueue = [];\n                l = callbacks.length;\n                for (i = 0; i < l; ++i) {\n                    var item = callbacks[i];\n                    item[0].apply(null, item[1]);\n                }\n            }\n        } while (microtickQueue.length > 0);\n        isOutsideMicroTick = true;\n        needsNewPhysicalTick = true;\n    }\n    function finalizePhysicalTick() {\n        var unhandledErrs = unhandledErrors;\n        unhandledErrors = [];\n        unhandledErrs.forEach(function (p) {\n            p._PSD.onunhandled.call(null, p._value, p);\n        });\n        var finalizers = tickFinalizers.slice(0);\n        var i = finalizers.length;\n        while (i)\n            finalizers[--i]();\n    }\n    function run_at_end_of_this_or_next_physical_tick(fn) {\n        function finalizer() {\n            fn();\n            tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n        }\n        tickFinalizers.push(finalizer);\n        ++numScheduledCalls;\n        asap(function () {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n        }, []);\n    }\n    function addPossiblyUnhandledError(promise) {\n        if (!unhandledErrors.some(function (p) { return p._value === promise._value; }))\n            unhandledErrors.push(promise);\n    }\n    function markErrorAsHandled(promise) {\n        var i = unhandledErrors.length;\n        while (i)\n            if (unhandledErrors[--i]._value === promise._value) {\n                unhandledErrors.splice(i, 1);\n                return;\n            }\n    }\n    function PromiseReject(reason) {\n        return new DexiePromise(INTERNAL, false, reason);\n    }\n    function wrap(fn, errorCatcher) {\n        var psd = PSD;\n        return function () {\n            var wasRootExec = beginMicroTickScope(), outerScope = PSD;\n            try {\n                switchToZone(psd, true);\n                return fn.apply(this, arguments);\n            }\n            catch (e) {\n                errorCatcher && errorCatcher(e);\n            }\n            finally {\n                switchToZone(outerScope, false);\n                if (wasRootExec)\n                    endMicroTickScope();\n            }\n        };\n    }\n    var task = { awaits: 0, echoes: 0, id: 0 };\n    var taskCounter = 0;\n    var zoneStack = [];\n    var zoneEchoes = 0;\n    var totalEchoes = 0;\n    var zone_id_counter = 0;\n    function newScope(fn, props, a1, a2) {\n        var parent = PSD, psd = Object.create(parent);\n        psd.parent = parent;\n        psd.ref = 0;\n        psd.global = false;\n        psd.id = ++zone_id_counter;\n        globalPSD.env;\n        psd.env = patchGlobalPromise ? {\n            Promise: DexiePromise,\n            PromiseProp: { value: DexiePromise, configurable: true, writable: true },\n            all: DexiePromise.all,\n            race: DexiePromise.race,\n            allSettled: DexiePromise.allSettled,\n            any: DexiePromise.any,\n            resolve: DexiePromise.resolve,\n            reject: DexiePromise.reject,\n        } : {};\n        if (props)\n            extend(psd, props);\n        ++parent.ref;\n        psd.finalize = function () {\n            --this.parent.ref || this.parent.finalize();\n        };\n        var rv = usePSD(psd, fn, a1, a2);\n        if (psd.ref === 0)\n            psd.finalize();\n        return rv;\n    }\n    function incrementExpectedAwaits() {\n        if (!task.id)\n            task.id = ++taskCounter;\n        ++task.awaits;\n        task.echoes += ZONE_ECHO_LIMIT;\n        return task.id;\n    }\n    function decrementExpectedAwaits() {\n        if (!task.awaits)\n            return false;\n        if (--task.awaits === 0)\n            task.id = 0;\n        task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n        return true;\n    }\n    if (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n        incrementExpectedAwaits = decrementExpectedAwaits = nop;\n    }\n    function onPossibleParallellAsync(possiblePromise) {\n        if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n            incrementExpectedAwaits();\n            return possiblePromise.then(function (x) {\n                decrementExpectedAwaits();\n                return x;\n            }, function (e) {\n                decrementExpectedAwaits();\n                return rejection(e);\n            });\n        }\n        return possiblePromise;\n    }\n    function zoneEnterEcho(targetZone) {\n        ++totalEchoes;\n        if (!task.echoes || --task.echoes === 0) {\n            task.echoes = task.awaits = task.id = 0;\n        }\n        zoneStack.push(PSD);\n        switchToZone(targetZone, true);\n    }\n    function zoneLeaveEcho() {\n        var zone = zoneStack[zoneStack.length - 1];\n        zoneStack.pop();\n        switchToZone(zone, false);\n    }\n    function switchToZone(targetZone, bEnteringZone) {\n        var currentZone = PSD;\n        if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n            queueMicrotask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n        }\n        if (targetZone === PSD)\n            return;\n        PSD = targetZone;\n        if (currentZone === globalPSD)\n            globalPSD.env = snapShot();\n        if (patchGlobalPromise) {\n            var GlobalPromise = globalPSD.env.Promise;\n            var targetEnv = targetZone.env;\n            if (currentZone.global || targetZone.global) {\n                Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n                GlobalPromise.all = targetEnv.all;\n                GlobalPromise.race = targetEnv.race;\n                GlobalPromise.resolve = targetEnv.resolve;\n                GlobalPromise.reject = targetEnv.reject;\n                if (targetEnv.allSettled)\n                    GlobalPromise.allSettled = targetEnv.allSettled;\n                if (targetEnv.any)\n                    GlobalPromise.any = targetEnv.any;\n            }\n        }\n    }\n    function snapShot() {\n        var GlobalPromise = _global.Promise;\n        return patchGlobalPromise ? {\n            Promise: GlobalPromise,\n            PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n            all: GlobalPromise.all,\n            race: GlobalPromise.race,\n            allSettled: GlobalPromise.allSettled,\n            any: GlobalPromise.any,\n            resolve: GlobalPromise.resolve,\n            reject: GlobalPromise.reject,\n        } : {};\n    }\n    function usePSD(psd, fn, a1, a2, a3) {\n        var outerScope = PSD;\n        try {\n            switchToZone(psd, true);\n            return fn(a1, a2, a3);\n        }\n        finally {\n            switchToZone(outerScope, false);\n        }\n    }\n    function nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n        return typeof fn !== 'function' ? fn : function () {\n            var outerZone = PSD;\n            if (possibleAwait)\n                incrementExpectedAwaits();\n            switchToZone(zone, true);\n            try {\n                return fn.apply(this, arguments);\n            }\n            finally {\n                switchToZone(outerZone, false);\n                if (cleanup)\n                    queueMicrotask(decrementExpectedAwaits);\n            }\n        };\n    }\n    function execInGlobalContext(cb) {\n        if (Promise === NativePromise && task.echoes === 0) {\n            if (zoneEchoes === 0) {\n                cb();\n            }\n            else {\n                enqueueNativeMicroTask(cb);\n            }\n        }\n        else {\n            setTimeout(cb, 0);\n        }\n    }\n    var rejection = DexiePromise.reject;\n\n    function tempTransaction(db, mode, storeNames, fn) {\n        if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {\n            if (db._state.openComplete) {\n                return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));\n            }\n            if (!db._state.isBeingOpened) {\n                if (!db._state.autoOpen)\n                    return rejection(new exceptions.DatabaseClosed());\n                db.open().catch(nop);\n            }\n            return db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });\n        }\n        else {\n            var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n            try {\n                trans.create();\n                db._state.PR1398_maxLoop = 3;\n            }\n            catch (ex) {\n                if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                    console.warn('Dexie: Need to reopen db');\n                    db.close({ disableAutoOpen: false });\n                    return db.open().then(function () { return tempTransaction(db, mode, storeNames, fn); });\n                }\n                return rejection(ex);\n            }\n            return trans._promise(mode, function (resolve, reject) {\n                return newScope(function () {\n                    PSD.trans = trans;\n                    return fn(resolve, reject, trans);\n                });\n            }).then(function (result) {\n                if (mode === 'readwrite')\n                    try {\n                        trans.idbtrans.commit();\n                    }\n                    catch (_a) { }\n                return mode === 'readonly' ? result : trans._completion.then(function () { return result; });\n            });\n        }\n    }\n\n    var DEXIE_VERSION = '4.2.1';\n    var maxString = String.fromCharCode(65535);\n    var minKey = -Infinity;\n    var INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\n    var STRING_EXPECTED = \"String expected.\";\n    var connections = [];\n    var DBNAMES_DB = '__dbnames';\n    var READONLY = 'readonly';\n    var READWRITE = 'readwrite';\n\n    function combine(filter1, filter2) {\n        return filter1 ?\n            filter2 ?\n                function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n                filter1 :\n            filter2;\n    }\n\n    var AnyRange = {\n        type: 3 ,\n        lower: -Infinity,\n        lowerOpen: false,\n        upper: [[]],\n        upperOpen: false\n    };\n\n    function workaroundForUndefinedPrimKey(keyPath) {\n        return typeof keyPath === \"string\" && !/\\./.test(keyPath)\n            ? function (obj) {\n                if (obj[keyPath] === undefined && (keyPath in obj)) {\n                    obj = deepClone(obj);\n                    delete obj[keyPath];\n                }\n                return obj;\n            }\n            : function (obj) { return obj; };\n    }\n\n    function Entity() {\n        throw exceptions.Type(\"Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.\");\n    }\n\n    function cmp(a, b) {\n        try {\n            var ta = type(a);\n            var tb = type(b);\n            if (ta !== tb) {\n                if (ta === 'Array')\n                    return 1;\n                if (tb === 'Array')\n                    return -1;\n                if (ta === 'binary')\n                    return 1;\n                if (tb === 'binary')\n                    return -1;\n                if (ta === 'string')\n                    return 1;\n                if (tb === 'string')\n                    return -1;\n                if (ta === 'Date')\n                    return 1;\n                if (tb !== 'Date')\n                    return NaN;\n                return -1;\n            }\n            switch (ta) {\n                case 'number':\n                case 'Date':\n                case 'string':\n                    return a > b ? 1 : a < b ? -1 : 0;\n                case 'binary': {\n                    return compareUint8Arrays(getUint8Array(a), getUint8Array(b));\n                }\n                case 'Array':\n                    return compareArrays(a, b);\n            }\n        }\n        catch (_a) { }\n        return NaN;\n    }\n    function compareArrays(a, b) {\n        var al = a.length;\n        var bl = b.length;\n        var l = al < bl ? al : bl;\n        for (var i = 0; i < l; ++i) {\n            var res = cmp(a[i], b[i]);\n            if (res !== 0)\n                return res;\n        }\n        return al === bl ? 0 : al < bl ? -1 : 1;\n    }\n    function compareUint8Arrays(a, b) {\n        var al = a.length;\n        var bl = b.length;\n        var l = al < bl ? al : bl;\n        for (var i = 0; i < l; ++i) {\n            if (a[i] !== b[i])\n                return a[i] < b[i] ? -1 : 1;\n        }\n        return al === bl ? 0 : al < bl ? -1 : 1;\n    }\n    function type(x) {\n        var t = typeof x;\n        if (t !== 'object')\n            return t;\n        if (ArrayBuffer.isView(x))\n            return 'binary';\n        var tsTag = toStringTag(x);\n        return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;\n    }\n    function getUint8Array(a) {\n        if (a instanceof Uint8Array)\n            return a;\n        if (ArrayBuffer.isView(a))\n            return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n        return new Uint8Array(a);\n    }\n\n    function builtInDeletionTrigger(table, keys, res) {\n        var yProps = table.schema.yProps;\n        if (!yProps)\n            return res;\n        if (keys && res.numFailures > 0)\n            keys = keys.filter(function (_, i) { return !res.failures[i]; });\n        return Promise.all(yProps.map(function (_a) {\n            var updatesTable = _a.updatesTable;\n            return keys\n                ? table.db.table(updatesTable).where('k').anyOf(keys).delete()\n                : table.db.table(updatesTable).clear();\n        })).then(function () { return res; });\n    }\n\n    var PropModification =  (function () {\n        function PropModification(spec) {\n            this[\"@@propmod\"] = spec;\n        }\n        PropModification.prototype.execute = function (value) {\n            var _a;\n            var spec = this[\"@@propmod\"];\n            if (spec.add !== undefined) {\n                var term = spec.add;\n                if (isArray(term)) {\n                    return __spreadArray(__spreadArray([], (isArray(value) ? value : []), true), term, true).sort();\n                }\n                if (typeof term === 'number')\n                    return (Number(value) || 0) + term;\n                if (typeof term === 'bigint') {\n                    try {\n                        return BigInt(value) + term;\n                    }\n                    catch (_b) {\n                        return BigInt(0) + term;\n                    }\n                }\n                throw new TypeError(\"Invalid term \".concat(term));\n            }\n            if (spec.remove !== undefined) {\n                var subtrahend_1 = spec.remove;\n                if (isArray(subtrahend_1)) {\n                    return isArray(value) ? value.filter(function (item) { return !subtrahend_1.includes(item); }).sort() : [];\n                }\n                if (typeof subtrahend_1 === 'number')\n                    return Number(value) - subtrahend_1;\n                if (typeof subtrahend_1 === 'bigint') {\n                    try {\n                        return BigInt(value) - subtrahend_1;\n                    }\n                    catch (_c) {\n                        return BigInt(0) - subtrahend_1;\n                    }\n                }\n                throw new TypeError(\"Invalid subtrahend \".concat(subtrahend_1));\n            }\n            var prefixToReplace = (_a = spec.replacePrefix) === null || _a === void 0 ? void 0 : _a[0];\n            if (prefixToReplace && typeof value === 'string' && value.startsWith(prefixToReplace)) {\n                return spec.replacePrefix[1] + value.substring(prefixToReplace.length);\n            }\n            return value;\n        };\n        return PropModification;\n    }());\n\n    function applyUpdateSpec(obj, changes) {\n        var keyPaths = keys(changes);\n        var numKeys = keyPaths.length;\n        var anythingModified = false;\n        for (var i = 0; i < numKeys; ++i) {\n            var keyPath = keyPaths[i];\n            var value = changes[keyPath];\n            var origValue = getByKeyPath(obj, keyPath);\n            if (value instanceof PropModification) {\n                setByKeyPath(obj, keyPath, value.execute(origValue));\n                anythingModified = true;\n            }\n            else if (origValue !== value) {\n                setByKeyPath(obj, keyPath, value);\n                anythingModified = true;\n            }\n        }\n        return anythingModified;\n    }\n\n    var Table =  (function () {\n        function Table() {\n        }\n        Table.prototype._trans = function (mode, fn, writeLocked) {\n            var trans = this._tx || PSD.trans;\n            var tableName = this.name;\n            var task = debug && typeof console !== 'undefined' && console.createTask && console.createTask(\"Dexie: \".concat(mode === 'readonly' ? 'read' : 'write', \" \").concat(this.name));\n            function checkTableInTransaction(resolve, reject, trans) {\n                if (!trans.schema[tableName])\n                    throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n                return fn(trans.idbtrans, trans);\n            }\n            var wasRootExec = beginMicroTickScope();\n            try {\n                var p = trans && trans.db._novip === this.db._novip ?\n                    trans === PSD.trans ?\n                        trans._promise(mode, checkTableInTransaction, writeLocked) :\n                        newScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :\n                    tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n                if (task) {\n                    p._consoleTask = task;\n                    p = p.catch(function (err) {\n                        console.trace(err);\n                        return rejection(err);\n                    });\n                }\n                return p;\n            }\n            finally {\n                if (wasRootExec)\n                    endMicroTickScope();\n            }\n        };\n        Table.prototype.get = function (keyOrCrit, cb) {\n            var _this = this;\n            if (keyOrCrit && keyOrCrit.constructor === Object)\n                return this.where(keyOrCrit).first(cb);\n            if (keyOrCrit == null)\n                return rejection(new exceptions.Type(\"Invalid argument to Table.get()\"));\n            return this._trans('readonly', function (trans) {\n                return _this.core.get({ trans: trans, key: keyOrCrit })\n                    .then(function (res) { return _this.hook.reading.fire(res); });\n            }).then(cb);\n        };\n        Table.prototype.where = function (indexOrCrit) {\n            if (typeof indexOrCrit === 'string')\n                return new this.db.WhereClause(this, indexOrCrit);\n            if (isArray(indexOrCrit))\n                return new this.db.WhereClause(this, \"[\".concat(indexOrCrit.join('+'), \"]\"));\n            var keyPaths = keys(indexOrCrit);\n            if (keyPaths.length === 1)\n                return this\n                    .where(keyPaths[0])\n                    .equals(indexOrCrit[keyPaths[0]]);\n            var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {\n                if (ix.compound &&\n                    keyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; })) {\n                    for (var i = 0; i < keyPaths.length; ++i) {\n                        if (keyPaths.indexOf(ix.keyPath[i]) === -1)\n                            return false;\n                    }\n                    return true;\n                }\n                return false;\n            }).sort(function (a, b) { return a.keyPath.length - b.keyPath.length; })[0];\n            if (compoundIndex && this.db._maxKey !== maxString) {\n                var keyPathsInValidOrder = compoundIndex.keyPath.slice(0, keyPaths.length);\n                return this\n                    .where(keyPathsInValidOrder)\n                    .equals(keyPathsInValidOrder.map(function (kp) { return indexOrCrit[kp]; }));\n            }\n            if (!compoundIndex && debug)\n                console.warn(\"The query \".concat(JSON.stringify(indexOrCrit), \" on \").concat(this.name, \" would benefit from a \") +\n                    \"compound index [\".concat(keyPaths.join('+'), \"]\"));\n            var idxByName = this.schema.idxByName;\n            function equals(a, b) {\n                return cmp(a, b) === 0;\n            }\n            var _a = keyPaths.reduce(function (_a, keyPath) {\n                var prevIndex = _a[0], prevFilterFn = _a[1];\n                var index = idxByName[keyPath];\n                var value = indexOrCrit[keyPath];\n                return [\n                    prevIndex || index,\n                    prevIndex || !index ?\n                        combine(prevFilterFn, index && index.multi ?\n                            function (x) {\n                                var prop = getByKeyPath(x, keyPath);\n                                return isArray(prop) && prop.some(function (item) { return equals(value, item); });\n                            } : function (x) { return equals(value, getByKeyPath(x, keyPath)); })\n                        : prevFilterFn\n                ];\n            }, [null, null]), idx = _a[0], filterFunction = _a[1];\n            return idx ?\n                this.where(idx.name).equals(indexOrCrit[idx.keyPath])\n                    .filter(filterFunction) :\n                compoundIndex ?\n                    this.filter(filterFunction) :\n                    this.where(keyPaths).equals('');\n        };\n        Table.prototype.filter = function (filterFunction) {\n            return this.toCollection().and(filterFunction);\n        };\n        Table.prototype.count = function (thenShortcut) {\n            return this.toCollection().count(thenShortcut);\n        };\n        Table.prototype.offset = function (offset) {\n            return this.toCollection().offset(offset);\n        };\n        Table.prototype.limit = function (numRows) {\n            return this.toCollection().limit(numRows);\n        };\n        Table.prototype.each = function (callback) {\n            return this.toCollection().each(callback);\n        };\n        Table.prototype.toArray = function (thenShortcut) {\n            return this.toCollection().toArray(thenShortcut);\n        };\n        Table.prototype.toCollection = function () {\n            return new this.db.Collection(new this.db.WhereClause(this));\n        };\n        Table.prototype.orderBy = function (index) {\n            return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n                \"[\".concat(index.join('+'), \"]\") :\n                index));\n        };\n        Table.prototype.reverse = function () {\n            return this.toCollection().reverse();\n        };\n        Table.prototype.mapToClass = function (constructor) {\n            var _a = this, db = _a.db, tableName = _a.name;\n            this.schema.mappedClass = constructor;\n            if (constructor.prototype instanceof Entity) {\n                constructor =  (function (_super) {\n                    __extends(class_1, _super);\n                    function class_1() {\n                        return _super !== null && _super.apply(this, arguments) || this;\n                    }\n                    Object.defineProperty(class_1.prototype, \"db\", {\n                        get: function () { return db; },\n                        enumerable: false,\n                        configurable: true\n                    });\n                    class_1.prototype.table = function () { return tableName; };\n                    return class_1;\n                }(constructor));\n            }\n            var inheritedProps = new Set();\n            for (var proto = constructor.prototype; proto; proto = getProto(proto)) {\n                Object.getOwnPropertyNames(proto).forEach(function (propName) { return inheritedProps.add(propName); });\n            }\n            var readHook = function (obj) {\n                if (!obj)\n                    return obj;\n                var res = Object.create(constructor.prototype);\n                for (var m in obj)\n                    if (!inheritedProps.has(m))\n                        try {\n                            res[m] = obj[m];\n                        }\n                        catch (_) { }\n                return res;\n            };\n            if (this.schema.readHook) {\n                this.hook.reading.unsubscribe(this.schema.readHook);\n            }\n            this.schema.readHook = readHook;\n            this.hook(\"reading\", readHook);\n            return constructor;\n        };\n        Table.prototype.defineClass = function () {\n            function Class(content) {\n                extend(this, content);\n            }\n            return this.mapToClass(Class);\n        };\n        Table.prototype.add = function (obj, key) {\n            var _this = this;\n            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            var objToAdd = obj;\n            if (keyPath && auto) {\n                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n            }\n            return this._trans('readwrite', function (trans) {\n                return _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\n            }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n                .then(function (lastResult) {\n                if (keyPath) {\n                    try {\n                        setByKeyPath(obj, keyPath, lastResult);\n                    }\n                    catch (_) { }\n                }\n                return lastResult;\n            });\n        };\n        Table.prototype.upsert = function (key, modifications) {\n            var _this = this;\n            var keyPath = this.schema.primKey.keyPath;\n            return this._trans('readwrite', function (trans) {\n                return _this.core.get({ trans: trans, key: key }).then(function (existing) {\n                    var obj = existing !== null && existing !== void 0 ? existing : {};\n                    applyUpdateSpec(obj, modifications);\n                    if (keyPath)\n                        setByKeyPath(obj, keyPath, key);\n                    return _this.core.mutate({\n                        trans: trans,\n                        type: 'put',\n                        values: [obj],\n                        keys: [key],\n                        upsert: true,\n                        updates: { keys: [key], changeSpecs: [modifications] }\n                    }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : !!existing; });\n                });\n            });\n        };\n        Table.prototype.update = function (keyOrObject, modifications) {\n            if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n                var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n                if (key === undefined)\n                    return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n                return this.where(\":id\").equals(key).modify(modifications);\n            }\n            else {\n                return this.where(\":id\").equals(keyOrObject).modify(modifications);\n            }\n        };\n        Table.prototype.put = function (obj, key) {\n            var _this = this;\n            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            var objToAdd = obj;\n            if (keyPath && auto) {\n                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n            }\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n                .then(function (lastResult) {\n                if (keyPath) {\n                    try {\n                        setByKeyPath(obj, keyPath, lastResult);\n                    }\n                    catch (_) { }\n                }\n                return lastResult;\n            });\n        };\n        Table.prototype.delete = function (key) {\n            var _this = this;\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] })\n                .then(function (res) { return builtInDeletionTrigger(_this, [key], res); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; }); });\n        };\n        Table.prototype.clear = function () {\n            var _this = this;\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange })\n                .then(function (res) { return builtInDeletionTrigger(_this, null, res); }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n        };\n        Table.prototype.bulkGet = function (keys) {\n            var _this = this;\n            return this._trans('readonly', function (trans) {\n                return _this.core.getMany({\n                    keys: keys,\n                    trans: trans\n                }).then(function (result) { return result.map(function (res) { return _this.hook.reading.fire(res); }); });\n            });\n        };\n        Table.prototype.bulkAdd = function (objects, keysOrOptions, options) {\n            var _this = this;\n            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n            options = options || (keys ? undefined : keysOrOptions);\n            var wantResults = options ? options.allKeys : undefined;\n            return this._trans('readwrite', function (trans) {\n                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n                if (keyPath && keys)\n                    throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n                if (keys && keys.length !== objects.length)\n                    throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                var numObjects = objects.length;\n                var objectsToAdd = keyPath && auto ?\n                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                    objects;\n                return _this.core.mutate({ trans: trans, type: 'add', keys: keys, values: objectsToAdd, wantResults: wantResults })\n                    .then(function (_a) {\n                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                    var result = wantResults ? results : lastResult;\n                    if (numFailures === 0)\n                        return result;\n                    throw new BulkError(\"\".concat(_this.name, \".bulkAdd(): \").concat(numFailures, \" of \").concat(numObjects, \" operations failed\"), failures);\n                });\n            });\n        };\n        Table.prototype.bulkPut = function (objects, keysOrOptions, options) {\n            var _this = this;\n            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n            options = options || (keys ? undefined : keysOrOptions);\n            var wantResults = options ? options.allKeys : undefined;\n            return this._trans('readwrite', function (trans) {\n                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n                if (keyPath && keys)\n                    throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n                if (keys && keys.length !== objects.length)\n                    throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                var numObjects = objects.length;\n                var objectsToPut = keyPath && auto ?\n                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                    objects;\n                return _this.core.mutate({ trans: trans, type: 'put', keys: keys, values: objectsToPut, wantResults: wantResults })\n                    .then(function (_a) {\n                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                    var result = wantResults ? results : lastResult;\n                    if (numFailures === 0)\n                        return result;\n                    throw new BulkError(\"\".concat(_this.name, \".bulkPut(): \").concat(numFailures, \" of \").concat(numObjects, \" operations failed\"), failures);\n                });\n            });\n        };\n        Table.prototype.bulkUpdate = function (keysAndChanges) {\n            var _this = this;\n            var coreTable = this.core;\n            var keys = keysAndChanges.map(function (entry) { return entry.key; });\n            var changeSpecs = keysAndChanges.map(function (entry) { return entry.changes; });\n            var offsetMap = [];\n            return this._trans('readwrite', function (trans) {\n                return coreTable.getMany({ trans: trans, keys: keys, cache: 'clone' }).then(function (objs) {\n                    var resultKeys = [];\n                    var resultObjs = [];\n                    keysAndChanges.forEach(function (_a, idx) {\n                        var key = _a.key, changes = _a.changes;\n                        var obj = objs[idx];\n                        if (obj) {\n                            for (var _i = 0, _b = Object.keys(changes); _i < _b.length; _i++) {\n                                var keyPath = _b[_i];\n                                var value = changes[keyPath];\n                                if (keyPath === _this.schema.primKey.keyPath) {\n                                    if (cmp(value, key) !== 0) {\n                                        throw new exceptions.Constraint(\"Cannot update primary key in bulkUpdate()\");\n                                    }\n                                }\n                                else {\n                                    setByKeyPath(obj, keyPath, value);\n                                }\n                            }\n                            offsetMap.push(idx);\n                            resultKeys.push(key);\n                            resultObjs.push(obj);\n                        }\n                    });\n                    var numEntries = resultKeys.length;\n                    return coreTable\n                        .mutate({\n                        trans: trans,\n                        type: 'put',\n                        keys: resultKeys,\n                        values: resultObjs,\n                        updates: {\n                            keys: keys,\n                            changeSpecs: changeSpecs\n                        }\n                    })\n                        .then(function (_a) {\n                        var numFailures = _a.numFailures, failures = _a.failures;\n                        if (numFailures === 0)\n                            return numEntries;\n                        for (var _i = 0, _b = Object.keys(failures); _i < _b.length; _i++) {\n                            var offset = _b[_i];\n                            var mappedOffset = offsetMap[Number(offset)];\n                            if (mappedOffset != null) {\n                                var failure = failures[offset];\n                                delete failures[offset];\n                                failures[mappedOffset] = failure;\n                            }\n                        }\n                        throw new BulkError(\"\".concat(_this.name, \".bulkUpdate(): \").concat(numFailures, \" of \").concat(numEntries, \" operations failed\"), failures);\n                    });\n                });\n            });\n        };\n        Table.prototype.bulkDelete = function (keys) {\n            var _this = this;\n            var numKeys = keys.length;\n            return this._trans('readwrite', function (trans) {\n                return _this.core.mutate({ trans: trans, type: 'delete', keys: keys })\n                    .then(function (res) { return builtInDeletionTrigger(_this, keys, res); });\n            }).then(function (_a) {\n                var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;\n                if (numFailures === 0)\n                    return lastResult;\n                throw new BulkError(\"\".concat(_this.name, \".bulkDelete(): \").concat(numFailures, \" of \").concat(numKeys, \" operations failed\"), failures);\n            });\n        };\n        return Table;\n    }());\n\n    function Events(ctx) {\n        var evs = {};\n        var rv = function (eventName, subscriber) {\n            if (subscriber) {\n                var i = arguments.length, args = new Array(i - 1);\n                while (--i)\n                    args[i - 1] = arguments[i];\n                evs[eventName].subscribe.apply(null, args);\n                return ctx;\n            }\n            else if (typeof (eventName) === 'string') {\n                return evs[eventName];\n            }\n        };\n        rv.addEventType = add;\n        for (var i = 1, l = arguments.length; i < l; ++i) {\n            add(arguments[i]);\n        }\n        return rv;\n        function add(eventName, chainFunction, defaultFunction) {\n            if (typeof eventName === 'object')\n                return addConfiguredEvents(eventName);\n            if (!chainFunction)\n                chainFunction = reverseStoppableEventChain;\n            if (!defaultFunction)\n                defaultFunction = nop;\n            var context = {\n                subscribers: [],\n                fire: defaultFunction,\n                subscribe: function (cb) {\n                    if (context.subscribers.indexOf(cb) === -1) {\n                        context.subscribers.push(cb);\n                        context.fire = chainFunction(context.fire, cb);\n                    }\n                },\n                unsubscribe: function (cb) {\n                    context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n                    context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n                }\n            };\n            evs[eventName] = rv[eventName] = context;\n            return context;\n        }\n        function addConfiguredEvents(cfg) {\n            keys(cfg).forEach(function (eventName) {\n                var args = cfg[eventName];\n                if (isArray(args)) {\n                    add(eventName, cfg[eventName][0], cfg[eventName][1]);\n                }\n                else if (args === 'asap') {\n                    var context = add(eventName, mirror, function fire() {\n                        var i = arguments.length, args = new Array(i);\n                        while (i--)\n                            args[i] = arguments[i];\n                        context.subscribers.forEach(function (fn) {\n                            asap$1(function fireEvent() {\n                                fn.apply(null, args);\n                            });\n                        });\n                    });\n                }\n                else\n                    throw new exceptions.InvalidArgument(\"Invalid event config\");\n            });\n        }\n    }\n\n    function makeClassConstructor(prototype, constructor) {\n        derive(constructor).from({ prototype: prototype });\n        return constructor;\n    }\n\n    function createTableConstructor(db) {\n        return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {\n            this.db = db;\n            this._tx = trans;\n            this.name = name;\n            this.schema = tableSchema;\n            this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n                \"creating\": [hookCreatingChain, nop],\n                \"reading\": [pureFunctionChain, mirror],\n                \"updating\": [hookUpdatingChain, nop],\n                \"deleting\": [hookDeletingChain, nop]\n            });\n        });\n    }\n\n    function isPlainKeyRange(ctx, ignoreLimitFilter) {\n        return !(ctx.filter || ctx.algorithm || ctx.or) &&\n            (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n    }\n    function addFilter(ctx, fn) {\n        ctx.filter = combine(ctx.filter, fn);\n    }\n    function addReplayFilter(ctx, factory, isLimitFilter) {\n        var curr = ctx.replayFilter;\n        ctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;\n        ctx.justLimit = isLimitFilter && !curr;\n    }\n    function addMatchFilter(ctx, fn) {\n        ctx.isMatch = combine(ctx.isMatch, fn);\n    }\n    function getIndexOrStore(ctx, coreSchema) {\n        if (ctx.isPrimKey)\n            return coreSchema.primaryKey;\n        var index = coreSchema.getIndexByKeyPath(ctx.index);\n        if (!index)\n            throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n        return index;\n    }\n    function openCursor(ctx, coreTable, trans) {\n        var index = getIndexOrStore(ctx, coreTable.schema);\n        return coreTable.openCursor({\n            trans: trans,\n            values: !ctx.keysOnly,\n            reverse: ctx.dir === 'prev',\n            unique: !!ctx.unique,\n            query: {\n                index: index,\n                range: ctx.range\n            }\n        });\n    }\n    function iter(ctx, fn, coreTrans, coreTable) {\n        var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n        if (!ctx.or) {\n            return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n        }\n        else {\n            var set_1 = {};\n            var union = function (item, cursor, advance) {\n                if (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {\n                    var primaryKey = cursor.primaryKey;\n                    var key = '' + primaryKey;\n                    if (key === '[object ArrayBuffer]')\n                        key = '' + new Uint8Array(primaryKey);\n                    if (!hasOwn(set_1, key)) {\n                        set_1[key] = true;\n                        fn(item, cursor, advance);\n                    }\n                }\n            };\n            return Promise.all([\n                ctx.or._iterate(union, coreTrans),\n                iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n            ]);\n        }\n    }\n    function iterate(cursorPromise, filter, fn, valueMapper) {\n        var mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;\n        var wrappedFn = wrap(mappedFn);\n        return cursorPromise.then(function (cursor) {\n            if (cursor) {\n                return cursor.start(function () {\n                    var c = function () { return cursor.continue(); };\n                    if (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop; }, function (e) { cursor.fail(e); c = nop; }))\n                        wrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });\n                    c();\n                });\n            }\n        });\n    }\n\n    var Collection =  (function () {\n        function Collection() {\n        }\n        Collection.prototype._read = function (fn, cb) {\n            var ctx = this._ctx;\n            return ctx.error ?\n                ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n                ctx.table._trans('readonly', fn).then(cb);\n        };\n        Collection.prototype._write = function (fn) {\n            var ctx = this._ctx;\n            return ctx.error ?\n                ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n                ctx.table._trans('readwrite', fn, \"locked\");\n        };\n        Collection.prototype._addAlgorithm = function (fn) {\n            var ctx = this._ctx;\n            ctx.algorithm = combine(ctx.algorithm, fn);\n        };\n        Collection.prototype._iterate = function (fn, coreTrans) {\n            return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n        };\n        Collection.prototype.clone = function (props) {\n            var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n            if (props)\n                extend(ctx, props);\n            rv._ctx = ctx;\n            return rv;\n        };\n        Collection.prototype.raw = function () {\n            this._ctx.valueMapper = null;\n            return this;\n        };\n        Collection.prototype.each = function (fn) {\n            var ctx = this._ctx;\n            return this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });\n        };\n        Collection.prototype.count = function (cb) {\n            var _this = this;\n            return this._read(function (trans) {\n                var ctx = _this._ctx;\n                var coreTable = ctx.table.core;\n                if (isPlainKeyRange(ctx, true)) {\n                    return coreTable.count({\n                        trans: trans,\n                        query: {\n                            index: getIndexOrStore(ctx, coreTable.schema),\n                            range: ctx.range\n                        }\n                    }).then(function (count) { return Math.min(count, ctx.limit); });\n                }\n                else {\n                    var count = 0;\n                    return iter(ctx, function () { ++count; return false; }, trans, coreTable)\n                        .then(function () { return count; });\n                }\n            }).then(cb);\n        };\n        Collection.prototype.sortBy = function (keyPath, cb) {\n            var parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n            function getval(obj, i) {\n                if (i)\n                    return getval(obj[parts[i]], i - 1);\n                return obj[lastPart];\n            }\n            var order = this._ctx.dir === \"next\" ? 1 : -1;\n            function sorter(a, b) {\n                var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n                return cmp(aVal, bVal) * order;\n            }\n            return this.toArray(function (a) {\n                return a.sort(sorter);\n            }).then(cb);\n        };\n        Collection.prototype.toArray = function (cb) {\n            var _this = this;\n            return this._read(function (trans) {\n                var ctx = _this._ctx;\n                if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                    var valueMapper_1 = ctx.valueMapper;\n                    var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                    return ctx.table.core.query({\n                        trans: trans,\n                        limit: ctx.limit,\n                        values: true,\n                        query: {\n                            index: index,\n                            range: ctx.range\n                        }\n                    }).then(function (_a) {\n                        var result = _a.result;\n                        return valueMapper_1 ? result.map(valueMapper_1) : result;\n                    });\n                }\n                else {\n                    var a_1 = [];\n                    return iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });\n                }\n            }, cb);\n        };\n        Collection.prototype.offset = function (offset) {\n            var ctx = this._ctx;\n            if (offset <= 0)\n                return this;\n            ctx.offset += offset;\n            if (isPlainKeyRange(ctx)) {\n                addReplayFilter(ctx, function () {\n                    var offsetLeft = offset;\n                    return function (cursor, advance) {\n                        if (offsetLeft === 0)\n                            return true;\n                        if (offsetLeft === 1) {\n                            --offsetLeft;\n                            return false;\n                        }\n                        advance(function () {\n                            cursor.advance(offsetLeft);\n                            offsetLeft = 0;\n                        });\n                        return false;\n                    };\n                });\n            }\n            else {\n                addReplayFilter(ctx, function () {\n                    var offsetLeft = offset;\n                    return function () { return (--offsetLeft < 0); };\n                });\n            }\n            return this;\n        };\n        Collection.prototype.limit = function (numRows) {\n            this._ctx.limit = Math.min(this._ctx.limit, numRows);\n            addReplayFilter(this._ctx, function () {\n                var rowsLeft = numRows;\n                return function (cursor, advance, resolve) {\n                    if (--rowsLeft <= 0)\n                        advance(resolve);\n                    return rowsLeft >= 0;\n                };\n            }, true);\n            return this;\n        };\n        Collection.prototype.until = function (filterFunction, bIncludeStopEntry) {\n            addFilter(this._ctx, function (cursor, advance, resolve) {\n                if (filterFunction(cursor.value)) {\n                    advance(resolve);\n                    return bIncludeStopEntry;\n                }\n                else {\n                    return true;\n                }\n            });\n            return this;\n        };\n        Collection.prototype.first = function (cb) {\n            return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n        };\n        Collection.prototype.last = function (cb) {\n            return this.reverse().first(cb);\n        };\n        Collection.prototype.filter = function (filterFunction) {\n            addFilter(this._ctx, function (cursor) {\n                return filterFunction(cursor.value);\n            });\n            addMatchFilter(this._ctx, filterFunction);\n            return this;\n        };\n        Collection.prototype.and = function (filter) {\n            return this.filter(filter);\n        };\n        Collection.prototype.or = function (indexName) {\n            return new this.db.WhereClause(this._ctx.table, indexName, this);\n        };\n        Collection.prototype.reverse = function () {\n            this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n            if (this._ondirectionchange)\n                this._ondirectionchange(this._ctx.dir);\n            return this;\n        };\n        Collection.prototype.desc = function () {\n            return this.reverse();\n        };\n        Collection.prototype.eachKey = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            return this.each(function (val, cursor) { cb(cursor.key, cursor); });\n        };\n        Collection.prototype.eachUniqueKey = function (cb) {\n            this._ctx.unique = \"unique\";\n            return this.eachKey(cb);\n        };\n        Collection.prototype.eachPrimaryKey = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n        };\n        Collection.prototype.keys = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            var a = [];\n            return this.each(function (item, cursor) {\n                a.push(cursor.key);\n            }).then(function () {\n                return a;\n            }).then(cb);\n        };\n        Collection.prototype.primaryKeys = function (cb) {\n            var ctx = this._ctx;\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                return this._read(function (trans) {\n                    var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                    return ctx.table.core.query({\n                        trans: trans,\n                        values: false,\n                        limit: ctx.limit,\n                        query: {\n                            index: index,\n                            range: ctx.range\n                        }\n                    });\n                }).then(function (_a) {\n                    var result = _a.result;\n                    return result;\n                }).then(cb);\n            }\n            ctx.keysOnly = !ctx.isMatch;\n            var a = [];\n            return this.each(function (item, cursor) {\n                a.push(cursor.primaryKey);\n            }).then(function () {\n                return a;\n            }).then(cb);\n        };\n        Collection.prototype.uniqueKeys = function (cb) {\n            this._ctx.unique = \"unique\";\n            return this.keys(cb);\n        };\n        Collection.prototype.firstKey = function (cb) {\n            return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n        };\n        Collection.prototype.lastKey = function (cb) {\n            return this.reverse().firstKey(cb);\n        };\n        Collection.prototype.distinct = function () {\n            var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n            if (!idx || !idx.multi)\n                return this;\n            var set = {};\n            addFilter(this._ctx, function (cursor) {\n                var strKey = cursor.primaryKey.toString();\n                var found = hasOwn(set, strKey);\n                set[strKey] = true;\n                return !found;\n            });\n            return this;\n        };\n        Collection.prototype.modify = function (changes) {\n            var _this = this;\n            var ctx = this._ctx;\n            return this._write(function (trans) {\n                var modifyer;\n                if (typeof changes === 'function') {\n                    modifyer = changes;\n                }\n                else {\n                    modifyer = function (item) { return applyUpdateSpec(item, changes); };\n                }\n                var coreTable = ctx.table.core;\n                var _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;\n                var limit = 200;\n                var modifyChunkSize = _this.db._options.modifyChunkSize;\n                if (modifyChunkSize) {\n                    if (typeof modifyChunkSize == 'object') {\n                        limit = modifyChunkSize[coreTable.name] || modifyChunkSize['*'] || 200;\n                    }\n                    else {\n                        limit = modifyChunkSize;\n                    }\n                }\n                var totalFailures = [];\n                var successCount = 0;\n                var failedKeys = [];\n                var applyMutateResult = function (expectedCount, res) {\n                    var failures = res.failures, numFailures = res.numFailures;\n                    successCount += expectedCount - numFailures;\n                    for (var _i = 0, _a = keys(failures); _i < _a.length; _i++) {\n                        var pos = _a[_i];\n                        totalFailures.push(failures[pos]);\n                    }\n                };\n                var isUnconditionalDelete = changes === deleteCallback;\n                return _this.clone().primaryKeys().then(function (keys) {\n                    var criteria = isPlainKeyRange(ctx) &&\n                        ctx.limit === Infinity &&\n                        (typeof changes !== 'function' || isUnconditionalDelete) && {\n                        index: ctx.index,\n                        range: ctx.range\n                    };\n                    var nextChunk = function (offset) {\n                        var count = Math.min(limit, keys.length - offset);\n                        var keysInChunk = keys.slice(offset, offset + count);\n                        return (isUnconditionalDelete ? Promise.resolve([]) : coreTable.getMany({\n                            trans: trans,\n                            keys: keysInChunk,\n                            cache: \"immutable\"\n                        })).then(function (values) {\n                            var addValues = [];\n                            var putValues = [];\n                            var putKeys = outbound ? [] : null;\n                            var deleteKeys = isUnconditionalDelete ? keysInChunk : [];\n                            if (!isUnconditionalDelete)\n                                for (var i = 0; i < count; ++i) {\n                                    var origValue = values[i];\n                                    var ctx_1 = {\n                                        value: deepClone(origValue),\n                                        primKey: keys[offset + i]\n                                    };\n                                    if (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {\n                                        if (ctx_1.value == null) {\n                                            deleteKeys.push(keys[offset + i]);\n                                        }\n                                        else if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {\n                                            deleteKeys.push(keys[offset + i]);\n                                            addValues.push(ctx_1.value);\n                                        }\n                                        else {\n                                            putValues.push(ctx_1.value);\n                                            if (outbound)\n                                                putKeys.push(keys[offset + i]);\n                                        }\n                                    }\n                                }\n                            return Promise.resolve(addValues.length > 0 &&\n                                coreTable.mutate({ trans: trans, type: 'add', values: addValues })\n                                    .then(function (res) {\n                                    for (var pos in res.failures) {\n                                        deleteKeys.splice(parseInt(pos), 1);\n                                    }\n                                    applyMutateResult(addValues.length, res);\n                                })).then(function () { return (putValues.length > 0 || (criteria && typeof changes === 'object')) &&\n                                coreTable.mutate({\n                                    trans: trans,\n                                    type: 'put',\n                                    keys: putKeys,\n                                    values: putValues,\n                                    criteria: criteria,\n                                    changeSpec: typeof changes !== 'function'\n                                        && changes,\n                                    isAdditionalChunk: offset > 0\n                                }).then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return (deleteKeys.length > 0 || (criteria && isUnconditionalDelete)) &&\n                                coreTable.mutate({\n                                    trans: trans,\n                                    type: 'delete',\n                                    keys: deleteKeys,\n                                    criteria: criteria,\n                                    isAdditionalChunk: offset > 0\n                                }).then(function (res) { return builtInDeletionTrigger(ctx.table, deleteKeys, res); })\n                                    .then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {\n                                return keys.length > offset + count && nextChunk(offset + limit);\n                            });\n                        });\n                    };\n                    return nextChunk(0).then(function () {\n                        if (totalFailures.length > 0)\n                            throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n                        return keys.length;\n                    });\n                });\n            });\n        };\n        Collection.prototype.delete = function () {\n            var ctx = this._ctx, range = ctx.range;\n            if (isPlainKeyRange(ctx) &&\n                !ctx.table.schema.yProps &&\n                (ctx.isPrimKey || range.type === 3 ))\n             {\n                return this._write(function (trans) {\n                    var primaryKey = ctx.table.core.schema.primaryKey;\n                    var coreRange = range;\n                    return ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {\n                        return ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })\n                            .then(function (_a) {\n                            var failures = _a.failures, numFailures = _a.numFailures;\n                            if (numFailures)\n                                throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);\n                            return count - numFailures;\n                        });\n                    });\n                });\n            }\n            return this.modify(deleteCallback);\n        };\n        return Collection;\n    }());\n    var deleteCallback = function (value, ctx) { return ctx.value = null; };\n\n    function createCollectionConstructor(db) {\n        return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {\n            this.db = db;\n            var keyRange = AnyRange, error = null;\n            if (keyRangeGenerator)\n                try {\n                    keyRange = keyRangeGenerator();\n                }\n                catch (ex) {\n                    error = ex;\n                }\n            var whereCtx = whereClause._ctx;\n            var table = whereCtx.table;\n            var readingHook = table.hook.reading.fire;\n            this._ctx = {\n                table: table,\n                index: whereCtx.index,\n                isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n                range: keyRange,\n                keysOnly: false,\n                dir: \"next\",\n                unique: \"\",\n                algorithm: null,\n                filter: null,\n                replayFilter: null,\n                justLimit: true,\n                isMatch: null,\n                offset: 0,\n                limit: Infinity,\n                error: error,\n                or: whereCtx.or,\n                valueMapper: readingHook !== mirror ? readingHook : null\n            };\n        });\n    }\n\n    function simpleCompare(a, b) {\n        return a < b ? -1 : a === b ? 0 : 1;\n    }\n    function simpleCompareReverse(a, b) {\n        return a > b ? -1 : a === b ? 0 : 1;\n    }\n\n    function fail(collectionOrWhereClause, err, T) {\n        var collection = collectionOrWhereClause instanceof WhereClause ?\n            new collectionOrWhereClause.Collection(collectionOrWhereClause) :\n            collectionOrWhereClause;\n        collection._ctx.error = T ? new T(err) : new TypeError(err);\n        return collection;\n    }\n    function emptyCollection(whereClause) {\n        return new whereClause.Collection(whereClause, function () { return rangeEqual(\"\"); }).limit(0);\n    }\n    function upperFactory(dir) {\n        return dir === \"next\" ?\n            function (s) { return s.toUpperCase(); } :\n            function (s) { return s.toLowerCase(); };\n    }\n    function lowerFactory(dir) {\n        return dir === \"next\" ?\n            function (s) { return s.toLowerCase(); } :\n            function (s) { return s.toUpperCase(); };\n    }\n    function nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n        var length = Math.min(key.length, lowerNeedle.length);\n        var llp = -1;\n        for (var i = 0; i < length; ++i) {\n            var lwrKeyChar = lowerKey[i];\n            if (lwrKeyChar !== lowerNeedle[i]) {\n                if (cmp(key[i], upperNeedle[i]) < 0)\n                    return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n                if (cmp(key[i], lowerNeedle[i]) < 0)\n                    return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n                if (llp >= 0)\n                    return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n                return null;\n            }\n            if (cmp(key[i], lwrKeyChar) < 0)\n                llp = i;\n        }\n        if (length < lowerNeedle.length && dir === \"next\")\n            return key + upperNeedle.substr(key.length);\n        if (length < key.length && dir === \"prev\")\n            return key.substr(0, upperNeedle.length);\n        return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n    }\n    function addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n        var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n        if (!needles.every(function (s) { return typeof s === 'string'; })) {\n            return fail(whereClause, STRING_EXPECTED);\n        }\n        function initDirection(dir) {\n            upper = upperFactory(dir);\n            lower = lowerFactory(dir);\n            compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n            var needleBounds = needles.map(function (needle) {\n                return { lower: lower(needle), upper: upper(needle) };\n            }).sort(function (a, b) {\n                return compare(a.lower, b.lower);\n            });\n            upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n            lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n            direction = dir;\n            nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n        }\n        initDirection(\"next\");\n        var c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });\n        c._ondirectionchange = function (direction) {\n            initDirection(direction);\n        };\n        var firstPossibleNeedle = 0;\n        c._addAlgorithm(function (cursor, advance, resolve) {\n            var key = cursor.key;\n            if (typeof key !== 'string')\n                return false;\n            var lowerKey = lower(key);\n            if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n                return true;\n            }\n            else {\n                var lowestPossibleCasing = null;\n                for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                    var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                    if (casing === null && lowestPossibleCasing === null)\n                        firstPossibleNeedle = i + 1;\n                    else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                        lowestPossibleCasing = casing;\n                    }\n                }\n                if (lowestPossibleCasing !== null) {\n                    advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n                }\n                else {\n                    advance(resolve);\n                }\n                return false;\n            }\n        });\n        return c;\n    }\n    function createRange(lower, upper, lowerOpen, upperOpen) {\n        return {\n            type: 2 ,\n            lower: lower,\n            upper: upper,\n            lowerOpen: lowerOpen,\n            upperOpen: upperOpen\n        };\n    }\n    function rangeEqual(value) {\n        return {\n            type: 1 ,\n            lower: value,\n            upper: value\n        };\n    }\n\n    var WhereClause =  (function () {\n        function WhereClause() {\n        }\n        Object.defineProperty(WhereClause.prototype, \"Collection\", {\n            get: function () {\n                return this._ctx.table.db.Collection;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        WhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {\n            includeLower = includeLower !== false;\n            includeUpper = includeUpper === true;\n            try {\n                if ((this._cmp(lower, upper) > 0) ||\n                    (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n                    return emptyCollection(this);\n                return new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n        };\n        WhereClause.prototype.equals = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return rangeEqual(value); });\n        };\n        WhereClause.prototype.above = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(value, undefined, true); });\n        };\n        WhereClause.prototype.aboveOrEqual = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(value, undefined, false); });\n        };\n        WhereClause.prototype.below = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(undefined, value, false, true); });\n        };\n        WhereClause.prototype.belowOrEqual = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(undefined, value); });\n        };\n        WhereClause.prototype.startsWith = function (str) {\n            if (typeof str !== 'string')\n                return fail(this, STRING_EXPECTED);\n            return this.between(str, str + maxString, true, true);\n        };\n        WhereClause.prototype.startsWithIgnoreCase = function (str) {\n            if (str === \"\")\n                return this.startsWith(str);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);\n        };\n        WhereClause.prototype.equalsIgnoreCase = function (str) {\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], \"\");\n        };\n        WhereClause.prototype.anyOfIgnoreCase = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return emptyCollection(this);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, \"\");\n        };\n        WhereClause.prototype.startsWithAnyOfIgnoreCase = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return emptyCollection(this);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);\n        };\n        WhereClause.prototype.anyOf = function () {\n            var _this = this;\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            var compare = this._cmp;\n            try {\n                set.sort(compare);\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            if (set.length === 0)\n                return emptyCollection(this);\n            var c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });\n            c._ondirectionchange = function (direction) {\n                compare = (direction === \"next\" ?\n                    _this._ascending :\n                    _this._descending);\n                set.sort(compare);\n            };\n            var i = 0;\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                var key = cursor.key;\n                while (compare(key, set[i]) > 0) {\n                    ++i;\n                    if (i === set.length) {\n                        advance(resolve);\n                        return false;\n                    }\n                }\n                if (compare(key, set[i]) === 0) {\n                    return true;\n                }\n                else {\n                    advance(function () { cursor.continue(set[i]); });\n                    return false;\n                }\n            });\n            return c;\n        };\n        WhereClause.prototype.notEqual = function (value) {\n            return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n        };\n        WhereClause.prototype.noneOf = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return new this.Collection(this);\n            try {\n                set.sort(this._ascending);\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            var ranges = set.reduce(function (res, val) { return res ?\n                res.concat([[res[res.length - 1][1], val]]) :\n                [[minKey, val]]; }, null);\n            ranges.push([set[set.length - 1], this.db._maxKey]);\n            return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n        };\n        WhereClause.prototype.inAnyRange = function (ranges, options) {\n            var _this = this;\n            var cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n            if (ranges.length === 0)\n                return emptyCollection(this);\n            if (!ranges.every(function (range) {\n                return range[0] !== undefined &&\n                    range[1] !== undefined &&\n                    ascending(range[0], range[1]) <= 0;\n            })) {\n                return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n            }\n            var includeLowers = !options || options.includeLowers !== false;\n            var includeUppers = options && options.includeUppers === true;\n            function addRange(ranges, newRange) {\n                var i = 0, l = ranges.length;\n                for (; i < l; ++i) {\n                    var range = ranges[i];\n                    if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                        range[0] = min(range[0], newRange[0]);\n                        range[1] = max(range[1], newRange[1]);\n                        break;\n                    }\n                }\n                if (i === l)\n                    ranges.push(newRange);\n                return ranges;\n            }\n            var sortDirection = ascending;\n            function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n            var set;\n            try {\n                set = ranges.reduce(addRange, []);\n                set.sort(rangeSorter);\n            }\n            catch (ex) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            var rangePos = 0;\n            var keyIsBeyondCurrentEntry = includeUppers ?\n                function (key) { return ascending(key, set[rangePos][1]) > 0; } :\n                function (key) { return ascending(key, set[rangePos][1]) >= 0; };\n            var keyIsBeforeCurrentEntry = includeLowers ?\n                function (key) { return descending(key, set[rangePos][0]) > 0; } :\n                function (key) { return descending(key, set[rangePos][0]) >= 0; };\n            function keyWithinCurrentRange(key) {\n                return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n            }\n            var checkKey = keyIsBeyondCurrentEntry;\n            var c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });\n            c._ondirectionchange = function (direction) {\n                if (direction === \"next\") {\n                    checkKey = keyIsBeyondCurrentEntry;\n                    sortDirection = ascending;\n                }\n                else {\n                    checkKey = keyIsBeforeCurrentEntry;\n                    sortDirection = descending;\n                }\n                set.sort(rangeSorter);\n            };\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                var key = cursor.key;\n                while (checkKey(key)) {\n                    ++rangePos;\n                    if (rangePos === set.length) {\n                        advance(resolve);\n                        return false;\n                    }\n                }\n                if (keyWithinCurrentRange(key)) {\n                    return true;\n                }\n                else if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {\n                    return false;\n                }\n                else {\n                    advance(function () {\n                        if (sortDirection === ascending)\n                            cursor.continue(set[rangePos][0]);\n                        else\n                            cursor.continue(set[rangePos][1]);\n                    });\n                    return false;\n                }\n            });\n            return c;\n        };\n        WhereClause.prototype.startsWithAnyOf = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (!set.every(function (s) { return typeof s === 'string'; })) {\n                return fail(this, \"startsWithAnyOf() only works with strings\");\n            }\n            if (set.length === 0)\n                return emptyCollection(this);\n            return this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));\n        };\n        return WhereClause;\n    }());\n\n    function createWhereClauseConstructor(db) {\n        return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {\n            this.db = db;\n            this._ctx = {\n                table: table,\n                index: index === \":id\" ? null : index,\n                or: orCollection\n            };\n            this._cmp = this._ascending = cmp;\n            this._descending = function (a, b) { return cmp(b, a); };\n            this._max = function (a, b) { return cmp(a, b) > 0 ? a : b; };\n            this._min = function (a, b) { return cmp(a, b) < 0 ? a : b; };\n            this._IDBKeyRange = db._deps.IDBKeyRange;\n            if (!this._IDBKeyRange)\n                throw new exceptions.MissingAPI();\n        });\n    }\n\n    function eventRejectHandler(reject) {\n        return wrap(function (event) {\n            preventDefault(event);\n            reject(event.target.error);\n            return false;\n        });\n    }\n    function preventDefault(event) {\n        if (event.stopPropagation)\n            event.stopPropagation();\n        if (event.preventDefault)\n            event.preventDefault();\n    }\n\n    var DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';\n    var STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';\n    var globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);\n\n    var Transaction =  (function () {\n        function Transaction() {\n        }\n        Transaction.prototype._lock = function () {\n            assert(!PSD.global);\n            ++this._reculock;\n            if (this._reculock === 1 && !PSD.global)\n                PSD.lockOwnerFor = this;\n            return this;\n        };\n        Transaction.prototype._unlock = function () {\n            assert(!PSD.global);\n            if (--this._reculock === 0) {\n                if (!PSD.global)\n                    PSD.lockOwnerFor = null;\n                while (this._blockedFuncs.length > 0 && !this._locked()) {\n                    var fnAndPSD = this._blockedFuncs.shift();\n                    try {\n                        usePSD(fnAndPSD[1], fnAndPSD[0]);\n                    }\n                    catch (e) { }\n                }\n            }\n            return this;\n        };\n        Transaction.prototype._locked = function () {\n            return this._reculock && PSD.lockOwnerFor !== this;\n        };\n        Transaction.prototype.create = function (idbtrans) {\n            var _this = this;\n            if (!this.mode)\n                return this;\n            var idbdb = this.db.idbdb;\n            var dbOpenError = this.db._state.dbOpenError;\n            assert(!this.idbtrans);\n            if (!idbtrans && !idbdb) {\n                switch (dbOpenError && dbOpenError.name) {\n                    case \"DatabaseClosedError\":\n                        throw new exceptions.DatabaseClosed(dbOpenError);\n                    case \"MissingAPIError\":\n                        throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                    default:\n                        throw new exceptions.OpenFailed(dbOpenError);\n                }\n            }\n            if (!this.active)\n                throw new exceptions.TransactionInactive();\n            assert(this._completion._state === null);\n            idbtrans = this.idbtrans = idbtrans ||\n                (this.db.core\n                    ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })\n                    : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));\n            idbtrans.onerror = wrap(function (ev) {\n                preventDefault(ev);\n                _this._reject(idbtrans.error);\n            });\n            idbtrans.onabort = wrap(function (ev) {\n                preventDefault(ev);\n                _this.active && _this._reject(new exceptions.Abort(idbtrans.error));\n                _this.active = false;\n                _this.on(\"abort\").fire(ev);\n            });\n            idbtrans.oncomplete = wrap(function () {\n                _this.active = false;\n                _this._resolve();\n                if ('mutatedParts' in idbtrans) {\n                    globalEvents.storagemutated.fire(idbtrans[\"mutatedParts\"]);\n                }\n            });\n            return this;\n        };\n        Transaction.prototype._promise = function (mode, fn, bWriteLock) {\n            var _this = this;\n            if (mode === 'readwrite' && this.mode !== 'readwrite')\n                return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n            if (!this.active)\n                return rejection(new exceptions.TransactionInactive());\n            if (this._locked()) {\n                return new DexiePromise(function (resolve, reject) {\n                    _this._blockedFuncs.push([function () {\n                            _this._promise(mode, fn, bWriteLock).then(resolve, reject);\n                        }, PSD]);\n                });\n            }\n            else if (bWriteLock) {\n                return newScope(function () {\n                    var p = new DexiePromise(function (resolve, reject) {\n                        _this._lock();\n                        var rv = fn(resolve, reject, _this);\n                        if (rv && rv.then)\n                            rv.then(resolve, reject);\n                    });\n                    p.finally(function () { return _this._unlock(); });\n                    p._lib = true;\n                    return p;\n                });\n            }\n            else {\n                var p = new DexiePromise(function (resolve, reject) {\n                    var rv = fn(resolve, reject, _this);\n                    if (rv && rv.then)\n                        rv.then(resolve, reject);\n                });\n                p._lib = true;\n                return p;\n            }\n        };\n        Transaction.prototype._root = function () {\n            return this.parent ? this.parent._root() : this;\n        };\n        Transaction.prototype.waitFor = function (promiseLike) {\n            var root = this._root();\n            var promise = DexiePromise.resolve(promiseLike);\n            if (root._waitingFor) {\n                root._waitingFor = root._waitingFor.then(function () { return promise; });\n            }\n            else {\n                root._waitingFor = promise;\n                root._waitingQueue = [];\n                var store = root.idbtrans.objectStore(root.storeNames[0]);\n                (function spin() {\n                    ++root._spinCount;\n                    while (root._waitingQueue.length)\n                        (root._waitingQueue.shift())();\n                    if (root._waitingFor)\n                        store.get(-Infinity).onsuccess = spin;\n                }());\n            }\n            var currentWaitPromise = root._waitingFor;\n            return new DexiePromise(function (resolve, reject) {\n                promise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {\n                    if (root._waitingFor === currentWaitPromise) {\n                        root._waitingFor = null;\n                    }\n                });\n            });\n        };\n        Transaction.prototype.abort = function () {\n            if (this.active) {\n                this.active = false;\n                if (this.idbtrans)\n                    this.idbtrans.abort();\n                this._reject(new exceptions.Abort());\n            }\n        };\n        Transaction.prototype.table = function (tableName) {\n            var memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n            if (hasOwn(memoizedTables, tableName))\n                return memoizedTables[tableName];\n            var tableSchema = this.schema[tableName];\n            if (!tableSchema) {\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n            }\n            var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n            transactionBoundTable.core = this.db.core.table(tableName);\n            memoizedTables[tableName] = transactionBoundTable;\n            return transactionBoundTable;\n        };\n        return Transaction;\n    }());\n\n    function createTransactionConstructor(db) {\n        return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {\n            var _this = this;\n            if (mode !== 'readonly')\n                storeNames.forEach(function (storeName) {\n                    var _a;\n                    var yProps = (_a = dbschema[storeName]) === null || _a === void 0 ? void 0 : _a.yProps;\n                    if (yProps)\n                        storeNames = storeNames.concat(yProps.map(function (p) { return p.updatesTable; }));\n                });\n            this.db = db;\n            this.mode = mode;\n            this.storeNames = storeNames;\n            this.schema = dbschema;\n            this.chromeTransactionDurability = chromeTransactionDurability;\n            this.idbtrans = null;\n            this.on = Events(this, \"complete\", \"error\", \"abort\");\n            this.parent = parent || null;\n            this.active = true;\n            this._reculock = 0;\n            this._blockedFuncs = [];\n            this._resolve = null;\n            this._reject = null;\n            this._waitingFor = null;\n            this._waitingQueue = null;\n            this._spinCount = 0;\n            this._completion = new DexiePromise(function (resolve, reject) {\n                _this._resolve = resolve;\n                _this._reject = reject;\n            });\n            this._completion.then(function () {\n                _this.active = false;\n                _this.on.complete.fire();\n            }, function (e) {\n                var wasActive = _this.active;\n                _this.active = false;\n                _this.on.error.fire(e);\n                _this.parent ?\n                    _this.parent._reject(e) :\n                    wasActive && _this.idbtrans && _this.idbtrans.abort();\n                return rejection(e);\n            });\n        });\n    }\n\n    function createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey, type) {\n        return {\n            name: name,\n            keyPath: keyPath,\n            unique: unique,\n            multi: multi,\n            auto: auto,\n            compound: compound,\n            src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath),\n            type: type\n        };\n    }\n    function nameFromKeyPath(keyPath) {\n        return typeof keyPath === 'string' ?\n            keyPath :\n            keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n    }\n\n    function createTableSchema(name, primKey, indexes) {\n        return {\n            name: name,\n            primKey: primKey,\n            indexes: indexes,\n            mappedClass: null,\n            idxByName: arrayToObject(indexes, function (index) { return [index.name, index]; }),\n        };\n    }\n\n    function safariMultiStoreFix(storeNames) {\n        return storeNames.length === 1 ? storeNames[0] : storeNames;\n    }\n    var getMaxKey = function (IdbKeyRange) {\n        try {\n            IdbKeyRange.only([[]]);\n            getMaxKey = function () { return [[]]; };\n            return [[]];\n        }\n        catch (e) {\n            getMaxKey = function () { return maxString; };\n            return maxString;\n        }\n    };\n\n    function getKeyExtractor(keyPath) {\n        if (keyPath == null) {\n            return function () { return undefined; };\n        }\n        else if (typeof keyPath === 'string') {\n            return getSinglePathKeyExtractor(keyPath);\n        }\n        else {\n            return function (obj) { return getByKeyPath(obj, keyPath); };\n        }\n    }\n    function getSinglePathKeyExtractor(keyPath) {\n        var split = keyPath.split('.');\n        if (split.length === 1) {\n            return function (obj) { return obj[keyPath]; };\n        }\n        else {\n            return function (obj) { return getByKeyPath(obj, keyPath); };\n        }\n    }\n\n    function arrayify(arrayLike) {\n        return [].slice.call(arrayLike);\n    }\n    var _id_counter = 0;\n    function getKeyPathAlias(keyPath) {\n        return keyPath == null ?\n            \":id\" :\n            typeof keyPath === 'string' ?\n                keyPath :\n                \"[\".concat(keyPath.join('+'), \"]\");\n    }\n    function createDBCore(db, IdbKeyRange, tmpTrans) {\n        function extractSchema(db, trans) {\n            var tables = arrayify(db.objectStoreNames);\n            return {\n                schema: {\n                    name: db.name,\n                    tables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {\n                        var keyPath = store.keyPath, autoIncrement = store.autoIncrement;\n                        var compound = isArray(keyPath);\n                        var outbound = keyPath == null;\n                        var indexByKeyPath = {};\n                        var result = {\n                            name: store.name,\n                            primaryKey: {\n                                name: null,\n                                isPrimaryKey: true,\n                                outbound: outbound,\n                                compound: compound,\n                                keyPath: keyPath,\n                                autoIncrement: autoIncrement,\n                                unique: true,\n                                extractKey: getKeyExtractor(keyPath)\n                            },\n                            indexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })\n                                .map(function (index) {\n                                var name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;\n                                var compound = isArray(keyPath);\n                                var result = {\n                                    name: name,\n                                    compound: compound,\n                                    keyPath: keyPath,\n                                    unique: unique,\n                                    multiEntry: multiEntry,\n                                    extractKey: getKeyExtractor(keyPath)\n                                };\n                                indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n                                return result;\n                            }),\n                            getIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }\n                        };\n                        indexByKeyPath[\":id\"] = result.primaryKey;\n                        if (keyPath != null) {\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n                        }\n                        return result;\n                    })\n                },\n                hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n                    !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n                        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n                        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n            };\n        }\n        function makeIDBKeyRange(range) {\n            if (range.type === 3 )\n                return null;\n            if (range.type === 4 )\n                throw new Error(\"Cannot convert never type to IDBKeyRange\");\n            var lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;\n            var idbRange = lower === undefined ?\n                upper === undefined ?\n                    null :\n                    IdbKeyRange.upperBound(upper, !!upperOpen) :\n                upper === undefined ?\n                    IdbKeyRange.lowerBound(lower, !!lowerOpen) :\n                    IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n            return idbRange;\n        }\n        function createDbCoreTable(tableSchema) {\n            var tableName = tableSchema.name;\n            function mutate(_a) {\n                var trans = _a.trans, type = _a.type, keys = _a.keys, values = _a.values, range = _a.range;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var store = trans.objectStore(tableName);\n                    var outbound = store.keyPath == null;\n                    var isAddOrPut = type === \"put\" || type === \"add\";\n                    if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n                        throw new Error(\"Invalid operation type: \" + type);\n                    var length = (keys || values || { length: 1 }).length;\n                    if (keys && values && keys.length !== values.length) {\n                        throw new Error(\"Given keys array must have same length as given values array.\");\n                    }\n                    if (length === 0)\n                        return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n                    var req;\n                    var reqs = [];\n                    var failures = [];\n                    var numFailures = 0;\n                    var errorHandler = function (event) {\n                        ++numFailures;\n                        preventDefault(event);\n                    };\n                    if (type === 'deleteRange') {\n                        if (range.type === 4 )\n                            return resolve({ numFailures: numFailures, failures: failures, results: [], lastResult: undefined });\n                        if (range.type === 3 )\n                            reqs.push(req = store.clear());\n                        else\n                            reqs.push(req = store.delete(makeIDBKeyRange(range)));\n                    }\n                    else {\n                        var _a = isAddOrPut ?\n                            outbound ?\n                                [values, keys] :\n                                [values, null] :\n                            [keys, null], args1 = _a[0], args2 = _a[1];\n                        if (isAddOrPut) {\n                            for (var i = 0; i < length; ++i) {\n                                reqs.push(req = (args2 && args2[i] !== undefined ?\n                                    store[type](args1[i], args2[i]) :\n                                    store[type](args1[i])));\n                                req.onerror = errorHandler;\n                            }\n                        }\n                        else {\n                            for (var i = 0; i < length; ++i) {\n                                reqs.push(req = store[type](args1[i]));\n                                req.onerror = errorHandler;\n                            }\n                        }\n                    }\n                    var done = function (event) {\n                        var lastResult = event.target.result;\n                        reqs.forEach(function (req, i) { return req.error != null && (failures[i] = req.error); });\n                        resolve({\n                            numFailures: numFailures,\n                            failures: failures,\n                            results: type === \"delete\" ? keys : reqs.map(function (req) { return req.result; }),\n                            lastResult: lastResult\n                        });\n                    };\n                    req.onerror = function (event) {\n                        errorHandler(event);\n                        done(event);\n                    };\n                    req.onsuccess = done;\n                });\n            }\n            function openCursor(_a) {\n                var trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var index = query.index, range = query.range;\n                    var store = trans.objectStore(tableName);\n                    var source = index.isPrimaryKey ?\n                        store :\n                        store.index(index.name);\n                    var direction = reverse ?\n                        unique ?\n                            \"prevunique\" :\n                            \"prev\" :\n                        unique ?\n                            \"nextunique\" :\n                            \"next\";\n                    var req = values || !('openKeyCursor' in source) ?\n                        source.openCursor(makeIDBKeyRange(range), direction) :\n                        source.openKeyCursor(makeIDBKeyRange(range), direction);\n                    req.onerror = eventRejectHandler(reject);\n                    req.onsuccess = wrap(function (ev) {\n                        var cursor = req.result;\n                        if (!cursor) {\n                            resolve(null);\n                            return;\n                        }\n                        cursor.___id = ++_id_counter;\n                        cursor.done = false;\n                        var _cursorContinue = cursor.continue.bind(cursor);\n                        var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n                        if (_cursorContinuePrimaryKey)\n                            _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n                        var _cursorAdvance = cursor.advance.bind(cursor);\n                        var doThrowCursorIsNotStarted = function () { throw new Error(\"Cursor not started\"); };\n                        var doThrowCursorIsStopped = function () { throw new Error(\"Cursor not stopped\"); };\n                        cursor.trans = trans;\n                        cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n                        cursor.fail = wrap(reject);\n                        cursor.next = function () {\n                            var _this = this;\n                            var gotOne = 1;\n                            return this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });\n                        };\n                        cursor.start = function (callback) {\n                            var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {\n                                resolveIteration = wrap(resolveIteration);\n                                req.onerror = eventRejectHandler(rejectIteration);\n                                cursor.fail = rejectIteration;\n                                cursor.stop = function (value) {\n                                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                                    resolveIteration(value);\n                                };\n                            });\n                            var guardedCallback = function () {\n                                if (req.result) {\n                                    try {\n                                        callback();\n                                    }\n                                    catch (err) {\n                                        cursor.fail(err);\n                                    }\n                                }\n                                else {\n                                    cursor.done = true;\n                                    cursor.start = function () { throw new Error(\"Cursor behind last entry\"); };\n                                    cursor.stop();\n                                }\n                            };\n                            req.onsuccess = wrap(function (ev) {\n                                req.onsuccess = guardedCallback;\n                                guardedCallback();\n                            });\n                            cursor.continue = _cursorContinue;\n                            cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n                            cursor.advance = _cursorAdvance;\n                            guardedCallback();\n                            return iterationPromise;\n                        };\n                        resolve(cursor);\n                    }, reject);\n                });\n            }\n            function query(hasGetAll) {\n                return function (request) {\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var trans = request.trans, values = request.values, limit = request.limit, query = request.query;\n                        var nonInfinitLimit = limit === Infinity ? undefined : limit;\n                        var index = query.index, range = query.range;\n                        var store = trans.objectStore(tableName);\n                        var source = index.isPrimaryKey ? store : store.index(index.name);\n                        var idbKeyRange = makeIDBKeyRange(range);\n                        if (limit === 0)\n                            return resolve({ result: [] });\n                        if (hasGetAll) {\n                            var req = values ?\n                                source.getAll(idbKeyRange, nonInfinitLimit) :\n                                source.getAllKeys(idbKeyRange, nonInfinitLimit);\n                            req.onsuccess = function (event) { return resolve({ result: event.target.result }); };\n                            req.onerror = eventRejectHandler(reject);\n                        }\n                        else {\n                            var count_1 = 0;\n                            var req_1 = values || !('openKeyCursor' in source) ?\n                                source.openCursor(idbKeyRange) :\n                                source.openKeyCursor(idbKeyRange);\n                            var result_1 = [];\n                            req_1.onsuccess = function (event) {\n                                var cursor = req_1.result;\n                                if (!cursor)\n                                    return resolve({ result: result_1 });\n                                result_1.push(values ? cursor.value : cursor.primaryKey);\n                                if (++count_1 === limit)\n                                    return resolve({ result: result_1 });\n                                cursor.continue();\n                            };\n                            req_1.onerror = eventRejectHandler(reject);\n                        }\n                    });\n                };\n            }\n            return {\n                name: tableName,\n                schema: tableSchema,\n                mutate: mutate,\n                getMany: function (_a) {\n                    var trans = _a.trans, keys = _a.keys;\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var store = trans.objectStore(tableName);\n                        var length = keys.length;\n                        var result = new Array(length);\n                        var keyCount = 0;\n                        var callbackCount = 0;\n                        var req;\n                        var successHandler = function (event) {\n                            var req = event.target;\n                            if ((result[req._pos] = req.result) != null)\n                                ;\n                            if (++callbackCount === keyCount)\n                                resolve(result);\n                        };\n                        var errorHandler = eventRejectHandler(reject);\n                        for (var i = 0; i < length; ++i) {\n                            var key = keys[i];\n                            if (key != null) {\n                                req = store.get(keys[i]);\n                                req._pos = i;\n                                req.onsuccess = successHandler;\n                                req.onerror = errorHandler;\n                                ++keyCount;\n                            }\n                        }\n                        if (keyCount === 0)\n                            resolve(result);\n                    });\n                },\n                get: function (_a) {\n                    var trans = _a.trans, key = _a.key;\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var store = trans.objectStore(tableName);\n                        var req = store.get(key);\n                        req.onsuccess = function (event) { return resolve(event.target.result); };\n                        req.onerror = eventRejectHandler(reject);\n                    });\n                },\n                query: query(hasGetAll),\n                openCursor: openCursor,\n                count: function (_a) {\n                    var query = _a.query, trans = _a.trans;\n                    var index = query.index, range = query.range;\n                    return new Promise(function (resolve, reject) {\n                        var store = trans.objectStore(tableName);\n                        var source = index.isPrimaryKey ? store : store.index(index.name);\n                        var idbKeyRange = makeIDBKeyRange(range);\n                        var req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n                        req.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });\n                        req.onerror = eventRejectHandler(reject);\n                    });\n                }\n            };\n        }\n        var _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;\n        var tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });\n        var tableMap = {};\n        tables.forEach(function (table) { return tableMap[table.name] = table; });\n        return {\n            stack: \"dbcore\",\n            transaction: db.transaction.bind(db),\n            table: function (name) {\n                var result = tableMap[name];\n                if (!result)\n                    throw new Error(\"Table '\".concat(name, \"' not found\"));\n                return tableMap[name];\n            },\n            MIN_KEY: -Infinity,\n            MAX_KEY: getMaxKey(IdbKeyRange),\n            schema: schema\n        };\n    }\n\n    function createMiddlewareStack(stackImpl, middlewares) {\n        return middlewares.reduce(function (down, _a) {\n            var create = _a.create;\n            return (__assign(__assign({}, down), create(down)));\n        }, stackImpl);\n    }\n    function createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {\n        var IDBKeyRange = _a.IDBKeyRange; _a.indexedDB;\n        var dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);\n        return {\n            dbcore: dbcore\n        };\n    }\n    function generateMiddlewareStacks(db, tmpTrans) {\n        var idbdb = tmpTrans.db;\n        var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n        db.core = stacks.dbcore;\n        db.tables.forEach(function (table) {\n            var tableName = table.name;\n            if (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {\n                table.core = db.core.table(tableName);\n                if (db[tableName] instanceof db.Table) {\n                    db[tableName].core = table.core;\n                }\n            }\n        });\n    }\n\n    function setApiOnPlace(db, objs, tableNames, dbschema) {\n        tableNames.forEach(function (tableName) {\n            var schema = dbschema[tableName];\n            objs.forEach(function (obj) {\n                var propDesc = getPropertyDescriptor(obj, tableName);\n                if (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\n                    if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n                        setProp(obj, tableName, {\n                            get: function () { return this.table(tableName); },\n                            set: function (value) {\n                                defineProperty(this, tableName, { value: value, writable: true, configurable: true, enumerable: true });\n                            }\n                        });\n                    }\n                    else {\n                        obj[tableName] = new db.Table(tableName, schema);\n                    }\n                }\n            });\n        });\n    }\n    function removeTablesApi(db, objs) {\n        objs.forEach(function (obj) {\n            for (var key in obj) {\n                if (obj[key] instanceof db.Table)\n                    delete obj[key];\n            }\n        });\n    }\n    function lowerVersionFirst(a, b) {\n        return a._cfg.version - b._cfg.version;\n    }\n    function runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n        var globalSchema = db._dbSchema;\n        if (idbUpgradeTrans.objectStoreNames.contains('$meta') && !globalSchema.$meta) {\n            globalSchema.$meta = createTableSchema(\"$meta\", parseIndexSyntax(\"\")[0], []);\n            db._storeNames.push('$meta');\n        }\n        var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n        trans.create(idbUpgradeTrans);\n        trans._completion.catch(reject);\n        var rejectTransaction = trans._reject.bind(trans);\n        var transless = PSD.transless || PSD;\n        newScope(function () {\n            PSD.trans = trans;\n            PSD.transless = transless;\n            if (oldVersion === 0) {\n                keys(globalSchema).forEach(function (tableName) {\n                    createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n                });\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                DexiePromise.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);\n            }\n            else {\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                return getExistingVersion(db, trans, oldVersion)\n                    .then(function (oldVersion) { return updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans); })\n                    .catch(rejectTransaction);\n            }\n        });\n    }\n    function patchCurrentVersion(db, idbUpgradeTrans) {\n        createMissingTables(db._dbSchema, idbUpgradeTrans);\n        if (idbUpgradeTrans.db.version % 10 === 0 && !idbUpgradeTrans.objectStoreNames.contains('$meta')) {\n            idbUpgradeTrans.db.createObjectStore('$meta').add(Math.ceil((idbUpgradeTrans.db.version / 10) - 1), 'version');\n        }\n        var globalSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n        adjustToExistingIndexNames(db, db._dbSchema, idbUpgradeTrans);\n        var diff = getSchemaDiff(globalSchema, db._dbSchema);\n        var _loop_1 = function (tableChange) {\n            if (tableChange.change.length || tableChange.recreate) {\n                console.warn(\"Unable to patch indexes of table \".concat(tableChange.name, \" because it has changes on the type of index or primary key.\"));\n                return { value: void 0 };\n            }\n            var store = idbUpgradeTrans.objectStore(tableChange.name);\n            tableChange.add.forEach(function (idx) {\n                if (debug)\n                    console.debug(\"Dexie upgrade patch: Creating missing index \".concat(tableChange.name, \".\").concat(idx.src));\n                addIndex(store, idx);\n            });\n        };\n        for (var _i = 0, _a = diff.change; _i < _a.length; _i++) {\n            var tableChange = _a[_i];\n            var state_1 = _loop_1(tableChange);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n    }\n    function getExistingVersion(db, trans, oldVersion) {\n        if (trans.storeNames.includes('$meta')) {\n            return trans.table('$meta').get('version').then(function (metaVersion) {\n                return metaVersion != null ? metaVersion : oldVersion;\n            });\n        }\n        else {\n            return DexiePromise.resolve(oldVersion);\n        }\n    }\n    function updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans) {\n        var queue = [];\n        var versions = db._versions;\n        var globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n        var versToRun = versions.filter(function (v) { return v._cfg.version >= oldVersion; });\n        if (versToRun.length === 0) {\n            return DexiePromise.resolve();\n        }\n        versToRun.forEach(function (version) {\n            queue.push(function () {\n                var oldSchema = globalSchema;\n                var newSchema = version._cfg.dbschema;\n                adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n                adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n                globalSchema = db._dbSchema = newSchema;\n                var diff = getSchemaDiff(oldSchema, newSchema);\n                diff.add.forEach(function (tuple) {\n                    createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n                });\n                diff.change.forEach(function (change) {\n                    if (change.recreate) {\n                        throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                    }\n                    else {\n                        var store_1 = idbUpgradeTrans.objectStore(change.name);\n                        change.add.forEach(function (idx) { return addIndex(store_1, idx); });\n                        change.change.forEach(function (idx) {\n                            store_1.deleteIndex(idx.name);\n                            addIndex(store_1, idx);\n                        });\n                        change.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });\n                    }\n                });\n                var contentUpgrade = version._cfg.contentUpgrade;\n                if (contentUpgrade && version._cfg.version > oldVersion) {\n                    generateMiddlewareStacks(db, idbUpgradeTrans);\n                    trans._memoizedTables = {};\n                    var upgradeSchema_1 = shallowClone(newSchema);\n                    diff.del.forEach(function (table) {\n                        upgradeSchema_1[table] = oldSchema[table];\n                    });\n                    removeTablesApi(db, [db.Transaction.prototype]);\n                    setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);\n                    trans.schema = upgradeSchema_1;\n                    var contentUpgradeIsAsync_1 = isAsyncFunction(contentUpgrade);\n                    if (contentUpgradeIsAsync_1) {\n                        incrementExpectedAwaits();\n                    }\n                    var returnValue_1;\n                    var promiseFollowed = DexiePromise.follow(function () {\n                        returnValue_1 = contentUpgrade(trans);\n                        if (returnValue_1) {\n                            if (contentUpgradeIsAsync_1) {\n                                var decrementor = decrementExpectedAwaits.bind(null, null);\n                                returnValue_1.then(decrementor, decrementor);\n                            }\n                        }\n                    });\n                    return (returnValue_1 && typeof returnValue_1.then === 'function' ?\n                        DexiePromise.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));\n                }\n            });\n            queue.push(function (idbtrans) {\n                var newSchema = version._cfg.dbschema;\n                deleteRemovedTables(newSchema, idbtrans);\n                removeTablesApi(db, [db.Transaction.prototype]);\n                setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n                trans.schema = db._dbSchema;\n            });\n            queue.push(function (idbtrans) {\n                if (db.idbdb.objectStoreNames.contains('$meta')) {\n                    if (Math.ceil(db.idbdb.version / 10) === version._cfg.version) {\n                        db.idbdb.deleteObjectStore('$meta');\n                        delete db._dbSchema.$meta;\n                        db._storeNames = db._storeNames.filter(function (name) { return name !== '$meta'; });\n                    }\n                    else {\n                        idbtrans.objectStore('$meta').put(version._cfg.version, 'version');\n                    }\n                }\n            });\n        });\n        function runQueue() {\n            return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n                DexiePromise.resolve();\n        }\n        return runQueue().then(function () {\n            createMissingTables(globalSchema, idbUpgradeTrans);\n        });\n    }\n    function getSchemaDiff(oldSchema, newSchema) {\n        var diff = {\n            del: [],\n            add: [],\n            change: []\n        };\n        var table;\n        for (table in oldSchema) {\n            if (!newSchema[table])\n                diff.del.push(table);\n        }\n        for (table in newSchema) {\n            var oldDef = oldSchema[table], newDef = newSchema[table];\n            if (!oldDef) {\n                diff.add.push([table, newDef]);\n            }\n            else {\n                var change = {\n                    name: table,\n                    def: newDef,\n                    recreate: false,\n                    del: [],\n                    add: [],\n                    change: []\n                };\n                if ((\n                '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\n                    (oldDef.primKey.auto !== newDef.primKey.auto)) {\n                    change.recreate = true;\n                    diff.change.push(change);\n                }\n                else {\n                    var oldIndexes = oldDef.idxByName;\n                    var newIndexes = newDef.idxByName;\n                    var idxName = void 0;\n                    for (idxName in oldIndexes) {\n                        if (!newIndexes[idxName])\n                            change.del.push(idxName);\n                    }\n                    for (idxName in newIndexes) {\n                        var oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n                        if (!oldIdx)\n                            change.add.push(newIdx);\n                        else if (oldIdx.src !== newIdx.src)\n                            change.change.push(newIdx);\n                    }\n                    if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                        diff.change.push(change);\n                    }\n                }\n            }\n        }\n        return diff;\n    }\n    function createTable(idbtrans, tableName, primKey, indexes) {\n        var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n            { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n            { autoIncrement: primKey.auto });\n        indexes.forEach(function (idx) { return addIndex(store, idx); });\n        return store;\n    }\n    function createMissingTables(newSchema, idbtrans) {\n        keys(newSchema).forEach(function (tableName) {\n            if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n                if (debug)\n                    console.debug('Dexie: Creating missing table', tableName);\n                createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n            }\n        });\n    }\n    function deleteRemovedTables(newSchema, idbtrans) {\n        [].slice.call(idbtrans.db.objectStoreNames).forEach(function (storeName) {\n            return newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName);\n        });\n    }\n    function addIndex(store, idx) {\n        store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n    }\n    function buildGlobalSchema(db, idbdb, tmpTrans) {\n        var globalSchema = {};\n        var dbStoreNames = slice(idbdb.objectStoreNames, 0);\n        dbStoreNames.forEach(function (storeName) {\n            var store = tmpTrans.objectStore(storeName);\n            var keyPath = store.keyPath;\n            var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", true, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n            var indexes = [];\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var idbindex = store.index(store.indexNames[j]);\n                keyPath = idbindex.keyPath;\n                var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n                indexes.push(index);\n            }\n            globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n        });\n        return globalSchema;\n    }\n    function readGlobalSchema(db, idbdb, tmpTrans) {\n        db.verno = idbdb.version / 10;\n        var globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n        db._storeNames = slice(idbdb.objectStoreNames, 0);\n        setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n    }\n    function verifyInstalledSchema(db, tmpTrans) {\n        var installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n        var diff = getSchemaDiff(installedSchema, db._dbSchema);\n        return !(diff.add.length || diff.change.some(function (ch) { return ch.add.length || ch.change.length; }));\n    }\n    function adjustToExistingIndexNames(db, schema, idbtrans) {\n        var storeNames = idbtrans.db.objectStoreNames;\n        for (var i = 0; i < storeNames.length; ++i) {\n            var storeName = storeNames[i];\n            var store = idbtrans.objectStore(storeName);\n            db._hasGetAll = 'getAll' in store;\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var indexName = store.indexNames[j];\n                var keyPath = store.index(indexName).keyPath;\n                var dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n                if (schema[storeName]) {\n                    var indexSpec = schema[storeName].idxByName[dexieName];\n                    if (indexSpec) {\n                        indexSpec.name = indexName;\n                        delete schema[storeName].idxByName[dexieName];\n                        schema[storeName].idxByName[indexName] = indexSpec;\n                    }\n                }\n            }\n        }\n        if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n            !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n            _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n            [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n            db._hasGetAll = false;\n        }\n    }\n    function parseIndexSyntax(primKeyAndIndexes) {\n        return primKeyAndIndexes.split(',').map(function (index, indexNum) {\n            var _a;\n            var typeSplit = index.split(':');\n            var type = (_a = typeSplit[1]) === null || _a === void 0 ? void 0 : _a.trim();\n            index = typeSplit[0].trim();\n            var name = index.replace(/([&*]|\\+\\+)/g, \"\");\n            var keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n            return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0, type);\n        });\n    }\n\n    var Version =  (function () {\n        function Version() {\n        }\n        Version.prototype._createTableSchema = function (name, primKey, indexes) {\n            return createTableSchema(name, primKey, indexes);\n        };\n        Version.prototype._parseIndexSyntax = function (primKeyAndIndexes) {\n            return parseIndexSyntax(primKeyAndIndexes);\n        };\n        Version.prototype._parseStoresSpec = function (stores, outSchema) {\n            var _this = this;\n            keys(stores).forEach(function (tableName) {\n                if (stores[tableName] !== null) {\n                    var indexes = _this._parseIndexSyntax(stores[tableName]);\n                    var primKey = indexes.shift();\n                    if (!primKey) {\n                        throw new exceptions.Schema('Invalid schema for table ' + tableName + ': ' + stores[tableName]);\n                    }\n                    primKey.unique = true;\n                    if (primKey.multi)\n                        throw new exceptions.Schema('Primary key cannot be multiEntry*');\n                    indexes.forEach(function (idx) {\n                        if (idx.auto)\n                            throw new exceptions.Schema('Only primary key can be marked as autoIncrement (++)');\n                        if (!idx.keyPath)\n                            throw new exceptions.Schema('Index must have a name and cannot be an empty string');\n                    });\n                    var tblSchema = _this._createTableSchema(tableName, primKey, indexes);\n                    outSchema[tableName] = tblSchema;\n                }\n            });\n        };\n        Version.prototype.stores = function (stores) {\n            var db = this.db;\n            this._cfg.storesSource = this._cfg.storesSource\n                ? extend(this._cfg.storesSource, stores)\n                : stores;\n            var versions = db._versions;\n            var storesSpec = {};\n            var dbschema = {};\n            versions.forEach(function (version) {\n                extend(storesSpec, version._cfg.storesSource);\n                dbschema = version._cfg.dbschema = {};\n                version._parseStoresSpec(storesSpec, dbschema);\n            });\n            db._dbSchema = dbschema;\n            removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n            setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n            db._storeNames = keys(dbschema);\n            return this;\n        };\n        Version.prototype.upgrade = function (upgradeFunction) {\n            this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);\n            return this;\n        };\n        return Version;\n    }());\n\n    function createVersionConstructor(db) {\n        return makeClassConstructor(Version.prototype, function Version(versionNumber) {\n            this.db = db;\n            this._cfg = {\n                version: versionNumber,\n                storesSource: null,\n                dbschema: {},\n                tables: {},\n                contentUpgrade: null\n            };\n        });\n    }\n\n    function getDbNamesTable(indexedDB, IDBKeyRange) {\n        var dbNamesDB = indexedDB[\"_dbNamesDB\"];\n        if (!dbNamesDB) {\n            dbNamesDB = indexedDB[\"_dbNamesDB\"] = new Dexie$1(DBNAMES_DB, {\n                addons: [],\n                indexedDB: indexedDB,\n                IDBKeyRange: IDBKeyRange,\n            });\n            dbNamesDB.version(1).stores({ dbnames: \"name\" });\n        }\n        return dbNamesDB.table(\"dbnames\");\n    }\n    function hasDatabasesNative(indexedDB) {\n        return indexedDB && typeof indexedDB.databases === \"function\";\n    }\n    function getDatabaseNames(_a) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        return hasDatabasesNative(indexedDB)\n            ? Promise.resolve(indexedDB.databases()).then(function (infos) {\n                return infos\n                    .map(function (info) { return info.name; })\n                    .filter(function (name) { return name !== DBNAMES_DB; });\n            })\n            : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();\n    }\n    function _onDatabaseCreated(_a, name) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        !hasDatabasesNative(indexedDB) &&\n            name !== DBNAMES_DB &&\n            getDbNamesTable(indexedDB, IDBKeyRange).put({ name: name }).catch(nop);\n    }\n    function _onDatabaseDeleted(_a, name) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        !hasDatabasesNative(indexedDB) &&\n            name !== DBNAMES_DB &&\n            getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);\n    }\n\n    function vip(fn) {\n        return newScope(function () {\n            PSD.letThrough = true;\n            return fn();\n        });\n    }\n\n    function idbReady() {\n        var isSafari = !navigator.userAgentData &&\n            /Safari\\//.test(navigator.userAgent) &&\n            !/Chrom(e|ium)\\//.test(navigator.userAgent);\n        if (!isSafari || !indexedDB.databases)\n            return Promise.resolve();\n        var intervalId;\n        return new Promise(function (resolve) {\n            var tryIdb = function () { return indexedDB.databases().finally(resolve); };\n            intervalId = setInterval(tryIdb, 100);\n            tryIdb();\n        }).finally(function () { return clearInterval(intervalId); });\n    }\n\n    var _a;\n    function isEmptyRange(node) {\n        return !(\"from\" in node);\n    }\n    var RangeSet = function (fromOrTree, to) {\n        if (this) {\n            extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });\n        }\n        else {\n            var rv = new RangeSet();\n            if (fromOrTree && (\"d\" in fromOrTree)) {\n                extend(rv, fromOrTree);\n            }\n            return rv;\n        }\n    };\n    props(RangeSet.prototype, (_a = {\n            add: function (rangeSet) {\n                mergeRanges(this, rangeSet);\n                return this;\n            },\n            addKey: function (key) {\n                addRange(this, key, key);\n                return this;\n            },\n            addKeys: function (keys) {\n                var _this = this;\n                keys.forEach(function (key) { return addRange(_this, key, key); });\n                return this;\n            },\n            hasKey: function (key) {\n                var node = getRangeSetIterator(this).next(key).value;\n                return node && cmp(node.from, key) <= 0 && cmp(node.to, key) >= 0;\n            }\n        },\n        _a[iteratorSymbol] = function () {\n            return getRangeSetIterator(this);\n        },\n        _a));\n    function addRange(target, from, to) {\n        var diff = cmp(from, to);\n        if (isNaN(diff))\n            return;\n        if (diff > 0)\n            throw RangeError();\n        if (isEmptyRange(target))\n            return extend(target, { from: from, to: to, d: 1 });\n        var left = target.l;\n        var right = target.r;\n        if (cmp(to, target.from) < 0) {\n            left\n                ? addRange(left, from, to)\n                : (target.l = { from: from, to: to, d: 1, l: null, r: null });\n            return rebalance(target);\n        }\n        if (cmp(from, target.to) > 0) {\n            right\n                ? addRange(right, from, to)\n                : (target.r = { from: from, to: to, d: 1, l: null, r: null });\n            return rebalance(target);\n        }\n        if (cmp(from, target.from) < 0) {\n            target.from = from;\n            target.l = null;\n            target.d = right ? right.d + 1 : 1;\n        }\n        if (cmp(to, target.to) > 0) {\n            target.to = to;\n            target.r = null;\n            target.d = target.l ? target.l.d + 1 : 1;\n        }\n        var rightWasCutOff = !target.r;\n        if (left && !target.l) {\n            mergeRanges(target, left);\n        }\n        if (right && rightWasCutOff) {\n            mergeRanges(target, right);\n        }\n    }\n    function mergeRanges(target, newSet) {\n        function _addRangeSet(target, _a) {\n            var from = _a.from, to = _a.to, l = _a.l, r = _a.r;\n            addRange(target, from, to);\n            if (l)\n                _addRangeSet(target, l);\n            if (r)\n                _addRangeSet(target, r);\n        }\n        if (!isEmptyRange(newSet))\n            _addRangeSet(target, newSet);\n    }\n    function rangesOverlap(rangeSet1, rangeSet2) {\n        var i1 = getRangeSetIterator(rangeSet2);\n        var nextResult1 = i1.next();\n        if (nextResult1.done)\n            return false;\n        var a = nextResult1.value;\n        var i2 = getRangeSetIterator(rangeSet1);\n        var nextResult2 = i2.next(a.from);\n        var b = nextResult2.value;\n        while (!nextResult1.done && !nextResult2.done) {\n            if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)\n                return true;\n            cmp(a.from, b.from) < 0\n                ? (a = (nextResult1 = i1.next(b.from)).value)\n                : (b = (nextResult2 = i2.next(a.from)).value);\n        }\n        return false;\n    }\n    function getRangeSetIterator(node) {\n        var state = isEmptyRange(node) ? null : { s: 0, n: node };\n        return {\n            next: function (key) {\n                var keyProvided = arguments.length > 0;\n                while (state) {\n                    switch (state.s) {\n                        case 0:\n                            state.s = 1;\n                            if (keyProvided) {\n                                while (state.n.l && cmp(key, state.n.from) < 0)\n                                    state = { up: state, n: state.n.l, s: 1 };\n                            }\n                            else {\n                                while (state.n.l)\n                                    state = { up: state, n: state.n.l, s: 1 };\n                            }\n                        case 1:\n                            state.s = 2;\n                            if (!keyProvided || cmp(key, state.n.to) <= 0)\n                                return { value: state.n, done: false };\n                        case 2:\n                            if (state.n.r) {\n                                state.s = 3;\n                                state = { up: state, n: state.n.r, s: 0 };\n                                continue;\n                            }\n                        case 3:\n                            state = state.up;\n                    }\n                }\n                return { done: true };\n            },\n        };\n    }\n    function rebalance(target) {\n        var _a, _b;\n        var diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);\n        var r = diff > 1 ? \"r\" : diff < -1 ? \"l\" : \"\";\n        if (r) {\n            var l = r === \"r\" ? \"l\" : \"r\";\n            var rootClone = __assign({}, target);\n            var oldRootRight = target[r];\n            target.from = oldRootRight.from;\n            target.to = oldRootRight.to;\n            target[r] = oldRootRight[r];\n            rootClone[r] = oldRootRight[l];\n            target[l] = rootClone;\n            rootClone.d = computeDepth(rootClone);\n        }\n        target.d = computeDepth(target);\n    }\n    function computeDepth(_a) {\n        var r = _a.r, l = _a.l;\n        return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;\n    }\n\n    function extendObservabilitySet(target, newSet) {\n        keys(newSet).forEach(function (part) {\n            if (target[part])\n                mergeRanges(target[part], newSet[part]);\n            else\n                target[part] = cloneSimpleObjectTree(newSet[part]);\n        });\n        return target;\n    }\n\n    function obsSetsOverlap(os1, os2) {\n        return os1.all || os2.all || Object.keys(os1).some(function (key) { return os2[key] && rangesOverlap(os2[key], os1[key]); });\n    }\n\n    var cache = {};\n\n    var unsignaledParts = {};\n    var isTaskEnqueued = false;\n    function signalSubscribersLazily(part, optimistic) {\n        extendObservabilitySet(unsignaledParts, part);\n        if (!isTaskEnqueued) {\n            isTaskEnqueued = true;\n            setTimeout(function () {\n                isTaskEnqueued = false;\n                var parts = unsignaledParts;\n                unsignaledParts = {};\n                signalSubscribersNow(parts, false);\n            }, 0);\n        }\n    }\n    function signalSubscribersNow(updatedParts, deleteAffectedCacheEntries) {\n        if (deleteAffectedCacheEntries === void 0) { deleteAffectedCacheEntries = false; }\n        var queriesToSignal = new Set();\n        if (updatedParts.all) {\n            for (var _i = 0, _a = Object.values(cache); _i < _a.length; _i++) {\n                var tblCache = _a[_i];\n                collectTableSubscribers(tblCache, updatedParts, queriesToSignal, deleteAffectedCacheEntries);\n            }\n        }\n        else {\n            for (var key in updatedParts) {\n                var parts = /^idb\\:\\/\\/(.*)\\/(.*)\\//.exec(key);\n                if (parts) {\n                    var dbName = parts[1], tableName = parts[2];\n                    var tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(tableName)];\n                    if (tblCache)\n                        collectTableSubscribers(tblCache, updatedParts, queriesToSignal, deleteAffectedCacheEntries);\n                }\n            }\n        }\n        queriesToSignal.forEach(function (requery) { return requery(); });\n    }\n    function collectTableSubscribers(tblCache, updatedParts, outQueriesToSignal, deleteAffectedCacheEntries) {\n        var updatedEntryLists = [];\n        for (var _i = 0, _a = Object.entries(tblCache.queries.query); _i < _a.length; _i++) {\n            var _b = _a[_i], indexName = _b[0], entries = _b[1];\n            var filteredEntries = [];\n            for (var _c = 0, entries_1 = entries; _c < entries_1.length; _c++) {\n                var entry = entries_1[_c];\n                if (obsSetsOverlap(updatedParts, entry.obsSet)) {\n                    entry.subscribers.forEach(function (requery) { return outQueriesToSignal.add(requery); });\n                }\n                else if (deleteAffectedCacheEntries) {\n                    filteredEntries.push(entry);\n                }\n            }\n            if (deleteAffectedCacheEntries)\n                updatedEntryLists.push([indexName, filteredEntries]);\n        }\n        if (deleteAffectedCacheEntries) {\n            for (var _d = 0, updatedEntryLists_1 = updatedEntryLists; _d < updatedEntryLists_1.length; _d++) {\n                var _e = updatedEntryLists_1[_d], indexName = _e[0], filteredEntries = _e[1];\n                tblCache.queries.query[indexName] = filteredEntries;\n            }\n        }\n    }\n\n    function dexieOpen(db) {\n        var state = db._state;\n        var indexedDB = db._deps.indexedDB;\n        if (state.isBeingOpened || db.idbdb)\n            return state.dbReadyPromise.then(function () { return state.dbOpenError ?\n                rejection(state.dbOpenError) :\n                db; });\n        state.isBeingOpened = true;\n        state.dbOpenError = null;\n        state.openComplete = false;\n        var openCanceller = state.openCanceller;\n        var nativeVerToOpen = Math.round(db.verno * 10);\n        var schemaPatchMode = false;\n        function throwIfCancelled() {\n            if (state.openCanceller !== openCanceller)\n                throw new exceptions.DatabaseClosed('db.open() was cancelled');\n        }\n        var resolveDbReady = state.dbReadyResolve,\n        upgradeTransaction = null, wasCreated = false;\n        var tryOpenDB = function () { return new DexiePromise(function (resolve, reject) {\n            throwIfCancelled();\n            if (!indexedDB)\n                throw new exceptions.MissingAPI();\n            var dbName = db.name;\n            var req = state.autoSchema || !nativeVerToOpen ?\n                indexedDB.open(dbName) :\n                indexedDB.open(dbName, nativeVerToOpen);\n            if (!req)\n                throw new exceptions.MissingAPI();\n            req.onerror = eventRejectHandler(reject);\n            req.onblocked = wrap(db._fireOnBlocked);\n            req.onupgradeneeded = wrap(function (e) {\n                upgradeTransaction = req.transaction;\n                if (state.autoSchema && !db._options.allowEmptyDB) {\n                    req.onerror = preventDefault;\n                    upgradeTransaction.abort();\n                    req.result.close();\n                    var delreq = indexedDB.deleteDatabase(dbName);\n                    delreq.onsuccess = delreq.onerror = wrap(function () {\n                        reject(new exceptions.NoSuchDatabase(\"Database \".concat(dbName, \" doesnt exist\")));\n                    });\n                }\n                else {\n                    upgradeTransaction.onerror = eventRejectHandler(reject);\n                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n                    wasCreated = oldVer < 1;\n                    db.idbdb = req.result;\n                    if (schemaPatchMode) {\n                        patchCurrentVersion(db, upgradeTransaction);\n                    }\n                    runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n                }\n            }, reject);\n            req.onsuccess = wrap(function () {\n                upgradeTransaction = null;\n                var idbdb = db.idbdb = req.result;\n                var objectStoreNames = slice(idbdb.objectStoreNames);\n                if (objectStoreNames.length > 0)\n                    try {\n                        var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n                        if (state.autoSchema)\n                            readGlobalSchema(db, idbdb, tmpTrans);\n                        else {\n                            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n                            if (!verifyInstalledSchema(db, tmpTrans) && !schemaPatchMode) {\n                                console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this.\");\n                                idbdb.close();\n                                nativeVerToOpen = idbdb.version + 1;\n                                schemaPatchMode = true;\n                                return resolve(tryOpenDB());\n                            }\n                        }\n                        generateMiddlewareStacks(db, tmpTrans);\n                    }\n                    catch (e) {\n                    }\n                connections.push(db);\n                idbdb.onversionchange = wrap(function (ev) {\n                    state.vcFired = true;\n                    db.on(\"versionchange\").fire(ev);\n                });\n                idbdb.onclose = wrap(function () {\n                    db.close({ disableAutoOpen: false });\n                });\n                if (wasCreated)\n                    _onDatabaseCreated(db._deps, dbName);\n                resolve();\n            }, reject);\n        }).catch(function (err) {\n            switch (err === null || err === void 0 ? void 0 : err.name) {\n                case \"UnknownError\":\n                    if (state.PR1398_maxLoop > 0) {\n                        state.PR1398_maxLoop--;\n                        console.warn('Dexie: Workaround for Chrome UnknownError on open()');\n                        return tryOpenDB();\n                    }\n                    break;\n                case \"VersionError\":\n                    if (nativeVerToOpen > 0) {\n                        nativeVerToOpen = 0;\n                        return tryOpenDB();\n                    }\n                    break;\n            }\n            return DexiePromise.reject(err);\n        }); };\n        return DexiePromise.race([\n            openCanceller,\n            (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(tryOpenDB)\n        ]).then(function () {\n            throwIfCancelled();\n            state.onReadyBeingFired = [];\n            return DexiePromise.resolve(vip(function () { return db.on.ready.fire(db.vip); })).then(function fireRemainders() {\n                if (state.onReadyBeingFired.length > 0) {\n                    var remainders_1 = state.onReadyBeingFired.reduce(promisableChain, nop);\n                    state.onReadyBeingFired = [];\n                    return DexiePromise.resolve(vip(function () { return remainders_1(db.vip); })).then(fireRemainders);\n                }\n            });\n        }).finally(function () {\n            if (state.openCanceller === openCanceller) {\n                state.onReadyBeingFired = null;\n                state.isBeingOpened = false;\n            }\n        }).catch(function (err) {\n            state.dbOpenError = err;\n            try {\n                upgradeTransaction && upgradeTransaction.abort();\n            }\n            catch (_a) { }\n            if (openCanceller === state.openCanceller) {\n                db._close();\n            }\n            return rejection(err);\n        }).finally(function () {\n            state.openComplete = true;\n            resolveDbReady();\n        }).then(function () {\n            if (wasCreated) {\n                var everything_1 = {};\n                db.tables.forEach(function (table) {\n                    table.schema.indexes.forEach(function (idx) {\n                        if (idx.name)\n                            everything_1[\"idb://\".concat(db.name, \"/\").concat(table.name, \"/\").concat(idx.name)] = new RangeSet(-Infinity, [[[]]]);\n                    });\n                    everything_1[\"idb://\".concat(db.name, \"/\").concat(table.name, \"/\")] = everything_1[\"idb://\".concat(db.name, \"/\").concat(table.name, \"/:dels\")] = new RangeSet(-Infinity, [[[]]]);\n                });\n                globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME).fire(everything_1);\n                signalSubscribersNow(everything_1, true);\n            }\n            return db;\n        });\n    }\n\n    function awaitIterator(iterator) {\n        var callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);\n        function step(getNext) {\n            return function (val) {\n                var next = getNext(val), value = next.value;\n                return next.done ? value :\n                    (!value || typeof value.then !== 'function' ?\n                        isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n                        value.then(onSuccess, onError));\n            };\n        }\n        return step(callNext)();\n    }\n\n    function extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n        var i = arguments.length;\n        if (i < 2)\n            throw new exceptions.InvalidArgument(\"Too few arguments\");\n        var args = new Array(i - 1);\n        while (--i)\n            args[i - 1] = arguments[i];\n        scopeFunc = args.pop();\n        var tables = flatten(args);\n        return [mode, tables, scopeFunc];\n    }\n    function enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n        return DexiePromise.resolve().then(function () {\n            var transless = PSD.transless || PSD;\n            var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n            trans.explicit = true;\n            var zoneProps = {\n                trans: trans,\n                transless: transless\n            };\n            if (parentTransaction) {\n                trans.idbtrans = parentTransaction.idbtrans;\n            }\n            else {\n                try {\n                    trans.create();\n                    trans.idbtrans._explicit = true;\n                    db._state.PR1398_maxLoop = 3;\n                }\n                catch (ex) {\n                    if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                        console.warn('Dexie: Need to reopen db');\n                        db.close({ disableAutoOpen: false });\n                        return db.open().then(function () { return enterTransactionScope(db, mode, storeNames, null, scopeFunc); });\n                    }\n                    return rejection(ex);\n                }\n            }\n            var scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n            if (scopeFuncIsAsync) {\n                incrementExpectedAwaits();\n            }\n            var returnValue;\n            var promiseFollowed = DexiePromise.follow(function () {\n                returnValue = scopeFunc.call(trans, trans);\n                if (returnValue) {\n                    if (scopeFuncIsAsync) {\n                        var decrementor = decrementExpectedAwaits.bind(null, null);\n                        returnValue.then(decrementor, decrementor);\n                    }\n                    else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                        returnValue = awaitIterator(returnValue);\n                    }\n                }\n            }, zoneProps);\n            return (returnValue && typeof returnValue.then === 'function' ?\n                DexiePromise.resolve(returnValue).then(function (x) { return trans.active ?\n                    x\n                    : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")); })\n                : promiseFollowed.then(function () { return returnValue; })).then(function (x) {\n                if (parentTransaction)\n                    trans._resolve();\n                return trans._completion.then(function () { return x; });\n            }).catch(function (e) {\n                trans._reject(e);\n                return rejection(e);\n            });\n        });\n    }\n\n    function pad(a, value, count) {\n        var result = isArray(a) ? a.slice() : [a];\n        for (var i = 0; i < count; ++i)\n            result.push(value);\n        return result;\n    }\n    function createVirtualIndexMiddleware(down) {\n        return __assign(__assign({}, down), { table: function (tableName) {\n                var table = down.table(tableName);\n                var schema = table.schema;\n                var indexLookup = {};\n                var allVirtualIndexes = [];\n                function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n                    var keyPathAlias = getKeyPathAlias(keyPath);\n                    var indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n                    var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n                    var isVirtual = keyTail > 0;\n                    var virtualIndex = __assign(__assign({}, lowLevelIndex), { name: isVirtual\n                            ? \"\".concat(keyPathAlias, \"(virtual-from:\").concat(lowLevelIndex.name, \")\")\n                            : lowLevelIndex.name, lowLevelIndex: lowLevelIndex, isVirtual: isVirtual, keyTail: keyTail, keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });\n                    indexList.push(virtualIndex);\n                    if (!virtualIndex.isPrimaryKey) {\n                        allVirtualIndexes.push(virtualIndex);\n                    }\n                    if (keyLength > 1) {\n                        var virtualKeyPath = keyLength === 2 ?\n                            keyPath[0] :\n                            keyPath.slice(0, keyLength - 1);\n                        addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n                    }\n                    indexList.sort(function (a, b) { return a.keyTail - b.keyTail; });\n                    return virtualIndex;\n                }\n                var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n                indexLookup[\":id\"] = [primaryKey];\n                for (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {\n                    var index = _a[_i];\n                    addVirtualIndexes(index.keyPath, 0, index);\n                }\n                function findBestIndex(keyPath) {\n                    var result = indexLookup[getKeyPathAlias(keyPath)];\n                    return result && result[0];\n                }\n                function translateRange(range, keyTail) {\n                    return {\n                        type: range.type === 1  ?\n                            2  :\n                            range.type,\n                        lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n                        lowerOpen: true,\n                        upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n                        upperOpen: true\n                    };\n                }\n                function translateRequest(req) {\n                    var index = req.query.index;\n                    return index.isVirtual ? __assign(__assign({}, req), { query: {\n                            index: index.lowLevelIndex,\n                            range: translateRange(req.query.range, index.keyTail)\n                        } }) : req;\n                }\n                var result = __assign(__assign({}, table), { schema: __assign(__assign({}, schema), { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {\n                        return table.count(translateRequest(req));\n                    }, query: function (req) {\n                        return table.query(translateRequest(req));\n                    }, openCursor: function (req) {\n                        var _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;\n                        if (!isVirtual)\n                            return table.openCursor(req);\n                        function createVirtualCursor(cursor) {\n                            function _continue(key) {\n                                key != null ?\n                                    cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n                                    req.unique ?\n                                        cursor.continue(cursor.key.slice(0, keyLength)\n                                            .concat(req.reverse\n                                            ? down.MIN_KEY\n                                            : down.MAX_KEY, keyTail)) :\n                                        cursor.continue();\n                            }\n                            var virtualCursor = Object.create(cursor, {\n                                continue: { value: _continue },\n                                continuePrimaryKey: {\n                                    value: function (key, primaryKey) {\n                                        cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                                    }\n                                },\n                                primaryKey: {\n                                    get: function () {\n                                        return cursor.primaryKey;\n                                    }\n                                },\n                                key: {\n                                    get: function () {\n                                        var key = cursor.key;\n                                        return keyLength === 1 ?\n                                            key[0] :\n                                            key.slice(0, keyLength);\n                                    }\n                                },\n                                value: {\n                                    get: function () {\n                                        return cursor.value;\n                                    }\n                                }\n                            });\n                            return virtualCursor;\n                        }\n                        return table.openCursor(translateRequest(req))\n                            .then(function (cursor) { return cursor && createVirtualCursor(cursor); });\n                    } });\n                return result;\n            } });\n    }\n    var virtualIndexMiddleware = {\n        stack: \"dbcore\",\n        name: \"VirtualIndexMiddleware\",\n        level: 1,\n        create: createVirtualIndexMiddleware\n    };\n\n    function getObjectDiff(a, b, rv, prfx) {\n        rv = rv || {};\n        prfx = prfx || '';\n        keys(a).forEach(function (prop) {\n            if (!hasOwn(b, prop)) {\n                rv[prfx + prop] = undefined;\n            }\n            else {\n                var ap = a[prop], bp = b[prop];\n                if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n                    var apTypeName = toStringTag(ap);\n                    var bpTypeName = toStringTag(bp);\n                    if (apTypeName !== bpTypeName) {\n                        rv[prfx + prop] = b[prop];\n                    }\n                    else if (apTypeName === 'Object') {\n                        getObjectDiff(ap, bp, rv, prfx + prop + '.');\n                    }\n                    else if (ap !== bp) {\n                        rv[prfx + prop] = b[prop];\n                    }\n                }\n                else if (ap !== bp)\n                    rv[prfx + prop] = b[prop];\n            }\n        });\n        keys(b).forEach(function (prop) {\n            if (!hasOwn(a, prop)) {\n                rv[prfx + prop] = b[prop];\n            }\n        });\n        return rv;\n    }\n\n    function getEffectiveKeys(primaryKey, req) {\n        if (req.type === 'delete')\n            return req.keys;\n        return req.keys || req.values.map(primaryKey.extractKey);\n    }\n\n    var hooksMiddleware = {\n        stack: \"dbcore\",\n        name: \"HooksMiddleware\",\n        level: 2,\n        create: function (downCore) { return (__assign(__assign({}, downCore), { table: function (tableName) {\n                var downTable = downCore.table(tableName);\n                var primaryKey = downTable.schema.primaryKey;\n                var tableMiddleware = __assign(__assign({}, downTable), { mutate: function (req) {\n                        var dxTrans = PSD.trans;\n                        var _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;\n                        switch (req.type) {\n                            case 'add':\n                                if (creating.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'put':\n                                if (creating.fire === nop && updating.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'delete':\n                                if (deleting.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'deleteRange':\n                                if (deleting.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);\n                        }\n                        return downTable.mutate(req);\n                        function addPutOrDelete(req) {\n                            var dxTrans = PSD.trans;\n                            var keys = req.keys || getEffectiveKeys(primaryKey, req);\n                            if (!keys)\n                                throw new Error(\"Keys missing\");\n                            req = req.type === 'add' || req.type === 'put' ? __assign(__assign({}, req), { keys: keys }) : __assign({}, req);\n                            if (req.type !== 'delete')\n                                req.values = __spreadArray([], req.values, true);\n                            if (req.keys)\n                                req.keys = __spreadArray([], req.keys, true);\n                            return getExistingValues(downTable, req, keys).then(function (existingValues) {\n                                var contexts = keys.map(function (key, i) {\n                                    var existingValue = existingValues[i];\n                                    var ctx = { onerror: null, onsuccess: null };\n                                    if (req.type === 'delete') {\n                                        deleting.fire.call(ctx, key, existingValue, dxTrans);\n                                    }\n                                    else if (req.type === 'add' || existingValue === undefined) {\n                                        var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n                                        if (key == null && generatedPrimaryKey != null) {\n                                            key = generatedPrimaryKey;\n                                            req.keys[i] = key;\n                                            if (!primaryKey.outbound) {\n                                                setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        var objectDiff = getObjectDiff(existingValue, req.values[i]);\n                                        var additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n                                        if (additionalChanges_1) {\n                                            var requestedValue_1 = req.values[i];\n                                            Object.keys(additionalChanges_1).forEach(function (keyPath) {\n                                                if (hasOwn(requestedValue_1, keyPath)) {\n                                                    requestedValue_1[keyPath] = additionalChanges_1[keyPath];\n                                                }\n                                                else {\n                                                    setByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);\n                                                }\n                                            });\n                                        }\n                                    }\n                                    return ctx;\n                                });\n                                return downTable.mutate(req).then(function (_a) {\n                                    var failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;\n                                    for (var i = 0; i < keys.length; ++i) {\n                                        var primKey = results ? results[i] : keys[i];\n                                        var ctx = contexts[i];\n                                        if (primKey == null) {\n                                            ctx.onerror && ctx.onerror(failures[i]);\n                                        }\n                                        else {\n                                            ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n                                                req.values[i] :\n                                                primKey\n                                            );\n                                        }\n                                    }\n                                    return { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };\n                                }).catch(function (error) {\n                                    contexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });\n                                    return Promise.reject(error);\n                                });\n                            });\n                        }\n                        function deleteRange(req) {\n                            return deleteNextChunk(req.trans, req.range, 10000);\n                        }\n                        function deleteNextChunk(trans, range, limit) {\n                            return downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })\n                                .then(function (_a) {\n                                var result = _a.result;\n                                return addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {\n                                    if (res.numFailures > 0)\n                                        return Promise.reject(res.failures[0]);\n                                    if (result.length < limit) {\n                                        return { failures: [], numFailures: 0, lastResult: undefined };\n                                    }\n                                    else {\n                                        return deleteNextChunk(trans, __assign(__assign({}, range), { lower: result[result.length - 1], lowerOpen: true }), limit);\n                                    }\n                                });\n                            });\n                        }\n                    } });\n                return tableMiddleware;\n            } })); }\n    };\n    function getExistingValues(table, req, effectiveKeys) {\n        return req.type === \"add\"\n            ? Promise.resolve([])\n            : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: \"immutable\" });\n    }\n\n    function getFromTransactionCache(keys, cache, clone) {\n        try {\n            if (!cache)\n                return null;\n            if (cache.keys.length < keys.length)\n                return null;\n            var result = [];\n            for (var i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {\n                if (cmp(cache.keys[i], keys[j]) !== 0)\n                    continue;\n                result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);\n                ++j;\n            }\n            return result.length === keys.length ? result : null;\n        }\n        catch (_a) {\n            return null;\n        }\n    }\n    var cacheExistingValuesMiddleware = {\n        stack: \"dbcore\",\n        level: -1,\n        create: function (core) {\n            return {\n                table: function (tableName) {\n                    var table = core.table(tableName);\n                    return __assign(__assign({}, table), { getMany: function (req) {\n                            if (!req.cache) {\n                                return table.getMany(req);\n                            }\n                            var cachedResult = getFromTransactionCache(req.keys, req.trans[\"_cache\"], req.cache === \"clone\");\n                            if (cachedResult) {\n                                return DexiePromise.resolve(cachedResult);\n                            }\n                            return table.getMany(req).then(function (res) {\n                                req.trans[\"_cache\"] = {\n                                    keys: req.keys,\n                                    values: req.cache === \"clone\" ? deepClone(res) : res,\n                                };\n                                return res;\n                            });\n                        }, mutate: function (req) {\n                            if (req.type !== \"add\")\n                                req.trans[\"_cache\"] = null;\n                            return table.mutate(req);\n                        } });\n                },\n            };\n        },\n    };\n\n    function isCachableContext(ctx, table) {\n        return (ctx.trans.mode === 'readonly' &&\n            !!ctx.subscr &&\n            !ctx.trans.explicit &&\n            ctx.trans.db._options.cache !== 'disabled' &&\n            !table.schema.primaryKey.outbound);\n    }\n\n    function isCachableRequest(type, req) {\n        switch (type) {\n            case 'query':\n                return req.values && !req.unique;\n            case 'get':\n                return false;\n            case 'getMany':\n                return false;\n            case 'count':\n                return false;\n            case 'openCursor':\n                return false;\n        }\n    }\n\n    var observabilityMiddleware = {\n        stack: \"dbcore\",\n        level: 0,\n        name: \"Observability\",\n        create: function (core) {\n            var dbName = core.schema.name;\n            var FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);\n            return __assign(__assign({}, core), { transaction: function (stores, mode, options) {\n                    if (PSD.subscr && mode !== 'readonly') {\n                        throw new exceptions.ReadOnly(\"Readwrite transaction in liveQuery context. Querier source: \".concat(PSD.querier));\n                    }\n                    return core.transaction(stores, mode, options);\n                }, table: function (tableName) {\n                    var table = core.table(tableName);\n                    var schema = table.schema;\n                    var primaryKey = schema.primaryKey, indexes = schema.indexes;\n                    var extractKey = primaryKey.extractKey, outbound = primaryKey.outbound;\n                    var indexesWithAutoIncPK = primaryKey.autoIncrement && indexes.filter(function (index) { return index.compound && index.keyPath.includes(primaryKey.keyPath); });\n                    var tableClone = __assign(__assign({}, table), { mutate: function (req) {\n                            var _a, _b;\n                            var trans = req.trans;\n                            var mutatedParts = req.mutatedParts || (req.mutatedParts = {});\n                            var getRangeSet = function (indexName) {\n                                var part = \"idb://\".concat(dbName, \"/\").concat(tableName, \"/\").concat(indexName);\n                                return (mutatedParts[part] ||\n                                    (mutatedParts[part] = new RangeSet()));\n                            };\n                            var pkRangeSet = getRangeSet(\"\");\n                            var delsRangeSet = getRangeSet(\":dels\");\n                            var type = req.type;\n                            var _c = req.type === \"deleteRange\"\n                                ? [req.range]\n                                : req.type === \"delete\"\n                                    ? [req.keys]\n                                    : req.values.length < 50\n                                        ? [getEffectiveKeys(primaryKey, req).filter(function (id) { return id; }), req.values]\n                                        : [], keys = _c[0], newObjs = _c[1];\n                            var oldCache = req.trans[\"_cache\"];\n                            if (isArray(keys)) {\n                                pkRangeSet.addKeys(keys);\n                                var oldObjs = type === 'delete' || keys.length === newObjs.length ? getFromTransactionCache(keys, oldCache) : null;\n                                if (!oldObjs) {\n                                    delsRangeSet.addKeys(keys);\n                                }\n                                if (oldObjs || newObjs) {\n                                    trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);\n                                }\n                            }\n                            else if (keys) {\n                                var range = {\n                                    from: (_a = keys.lower) !== null && _a !== void 0 ? _a : core.MIN_KEY,\n                                    to: (_b = keys.upper) !== null && _b !== void 0 ? _b : core.MAX_KEY\n                                };\n                                delsRangeSet.add(range);\n                                pkRangeSet.add(range);\n                            }\n                            else {\n                                pkRangeSet.add(FULL_RANGE);\n                                delsRangeSet.add(FULL_RANGE);\n                                schema.indexes.forEach(function (idx) { return getRangeSet(idx.name).add(FULL_RANGE); });\n                            }\n                            return table.mutate(req).then(function (res) {\n                                if (keys && (req.type === 'add' || req.type === 'put')) {\n                                    pkRangeSet.addKeys(res.results);\n                                    if (indexesWithAutoIncPK) {\n                                        indexesWithAutoIncPK.forEach(function (idx) {\n                                            var idxVals = req.values.map(function (v) { return idx.extractKey(v); });\n                                            var pkPos = idx.keyPath.findIndex(function (prop) { return prop === primaryKey.keyPath; });\n                                            for (var i = 0, len = res.results.length; i < len; ++i) {\n                                                idxVals[i][pkPos] = res.results[i];\n                                            }\n                                            getRangeSet(idx.name).addKeys(idxVals);\n                                        });\n                                    }\n                                }\n                                trans.mutatedParts = extendObservabilitySet(trans.mutatedParts || {}, mutatedParts);\n                                return res;\n                            });\n                        } });\n                    var getRange = function (_a) {\n                        var _b, _c;\n                        var _d = _a.query, index = _d.index, range = _d.range;\n                        return [\n                            index,\n                            new RangeSet((_b = range.lower) !== null && _b !== void 0 ? _b : core.MIN_KEY, (_c = range.upper) !== null && _c !== void 0 ? _c : core.MAX_KEY),\n                        ];\n                    };\n                    var readSubscribers = {\n                        get: function (req) { return [primaryKey, new RangeSet(req.key)]; },\n                        getMany: function (req) { return [primaryKey, new RangeSet().addKeys(req.keys)]; },\n                        count: getRange,\n                        query: getRange,\n                        openCursor: getRange,\n                    };\n                    keys(readSubscribers).forEach(function (method) {\n                        tableClone[method] = function (req) {\n                            var subscr = PSD.subscr;\n                            var isLiveQuery = !!subscr;\n                            var cachable = isCachableContext(PSD, table) && isCachableRequest(method, req);\n                            var obsSet = cachable\n                                ? req.obsSet = {}\n                                : subscr;\n                            if (isLiveQuery) {\n                                var getRangeSet = function (indexName) {\n                                    var part = \"idb://\".concat(dbName, \"/\").concat(tableName, \"/\").concat(indexName);\n                                    return (obsSet[part] ||\n                                        (obsSet[part] = new RangeSet()));\n                                };\n                                var pkRangeSet_1 = getRangeSet(\"\");\n                                var delsRangeSet_1 = getRangeSet(\":dels\");\n                                var _a = readSubscribers[method](req), queriedIndex = _a[0], queriedRanges = _a[1];\n                                if (method === 'query' && queriedIndex.isPrimaryKey && !req.values) {\n                                    delsRangeSet_1.add(queriedRanges);\n                                }\n                                else {\n                                    getRangeSet(queriedIndex.name || \"\").add(queriedRanges);\n                                }\n                                if (!queriedIndex.isPrimaryKey) {\n                                    if (method === \"count\") {\n                                        delsRangeSet_1.add(FULL_RANGE);\n                                    }\n                                    else {\n                                        var keysPromise_1 = method === \"query\" &&\n                                            outbound &&\n                                            req.values &&\n                                            table.query(__assign(__assign({}, req), { values: false }));\n                                        return table[method].apply(this, arguments).then(function (res) {\n                                            if (method === \"query\") {\n                                                if (outbound && req.values) {\n                                                    return keysPromise_1.then(function (_a) {\n                                                        var resultingKeys = _a.result;\n                                                        pkRangeSet_1.addKeys(resultingKeys);\n                                                        return res;\n                                                    });\n                                                }\n                                                var pKeys = req.values\n                                                    ? res.result.map(extractKey)\n                                                    : res.result;\n                                                if (req.values) {\n                                                    pkRangeSet_1.addKeys(pKeys);\n                                                }\n                                                else {\n                                                    delsRangeSet_1.addKeys(pKeys);\n                                                }\n                                            }\n                                            else if (method === \"openCursor\") {\n                                                var cursor_1 = res;\n                                                var wantValues_1 = req.values;\n                                                return (cursor_1 &&\n                                                    Object.create(cursor_1, {\n                                                        key: {\n                                                            get: function () {\n                                                                delsRangeSet_1.addKey(cursor_1.primaryKey);\n                                                                return cursor_1.key;\n                                                            },\n                                                        },\n                                                        primaryKey: {\n                                                            get: function () {\n                                                                var pkey = cursor_1.primaryKey;\n                                                                delsRangeSet_1.addKey(pkey);\n                                                                return pkey;\n                                                            },\n                                                        },\n                                                        value: {\n                                                            get: function () {\n                                                                wantValues_1 && pkRangeSet_1.addKey(cursor_1.primaryKey);\n                                                                return cursor_1.value;\n                                                            },\n                                                        },\n                                                    }));\n                                            }\n                                            return res;\n                                        });\n                                    }\n                                }\n                            }\n                            return table[method].apply(this, arguments);\n                        };\n                    });\n                    return tableClone;\n                } });\n        },\n    };\n    function trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {\n        function addAffectedIndex(ix) {\n            var rangeSet = getRangeSet(ix.name || \"\");\n            function extractKey(obj) {\n                return obj != null ? ix.extractKey(obj) : null;\n            }\n            var addKeyOrKeys = function (key) { return ix.multiEntry && isArray(key)\n                ? key.forEach(function (key) { return rangeSet.addKey(key); })\n                : rangeSet.addKey(key); };\n            (oldObjs || newObjs).forEach(function (_, i) {\n                var oldKey = oldObjs && extractKey(oldObjs[i]);\n                var newKey = newObjs && extractKey(newObjs[i]);\n                if (cmp(oldKey, newKey) !== 0) {\n                    if (oldKey != null)\n                        addKeyOrKeys(oldKey);\n                    if (newKey != null)\n                        addKeyOrKeys(newKey);\n                }\n            });\n        }\n        schema.indexes.forEach(addAffectedIndex);\n    }\n\n    function adjustOptimisticFromFailures(tblCache, req, res) {\n        if (res.numFailures === 0)\n            return req;\n        if (req.type === 'deleteRange') {\n            return null;\n        }\n        var numBulkOps = req.keys\n            ? req.keys.length\n            : 'values' in req && req.values\n                ? req.values.length\n                : 1;\n        if (res.numFailures === numBulkOps) {\n            return null;\n        }\n        var clone = __assign({}, req);\n        if (isArray(clone.keys)) {\n            clone.keys = clone.keys.filter(function (_, i) { return !(i in res.failures); });\n        }\n        if ('values' in clone && isArray(clone.values)) {\n            clone.values = clone.values.filter(function (_, i) { return !(i in res.failures); });\n        }\n        return clone;\n    }\n\n    function isAboveLower(key, range) {\n        return range.lower === undefined\n            ? true\n            : range.lowerOpen\n                ? cmp(key, range.lower) > 0\n                : cmp(key, range.lower) >= 0;\n    }\n    function isBelowUpper(key, range) {\n        return range.upper === undefined\n            ? true\n            : range.upperOpen\n                ? cmp(key, range.upper) < 0\n                : cmp(key, range.upper) <= 0;\n    }\n    function isWithinRange(key, range) {\n        return isAboveLower(key, range) && isBelowUpper(key, range);\n    }\n\n    function applyOptimisticOps(result, req, ops, table, cacheEntry, immutable) {\n        if (!ops || ops.length === 0)\n            return result;\n        var index = req.query.index;\n        var multiEntry = index.multiEntry;\n        var queryRange = req.query.range;\n        var primaryKey = table.schema.primaryKey;\n        var extractPrimKey = primaryKey.extractKey;\n        var extractIndex = index.extractKey;\n        var extractLowLevelIndex = (index.lowLevelIndex || index).extractKey;\n        var finalResult = ops.reduce(function (result, op) {\n            var modifedResult = result;\n            var includedValues = [];\n            if (op.type === 'add' || op.type === 'put') {\n                var includedPKs = new RangeSet();\n                for (var i = op.values.length - 1; i >= 0; --i) {\n                    var value = op.values[i];\n                    var pk = extractPrimKey(value);\n                    if (includedPKs.hasKey(pk))\n                        continue;\n                    var key = extractIndex(value);\n                    if (multiEntry && isArray(key)\n                        ? key.some(function (k) { return isWithinRange(k, queryRange); })\n                        : isWithinRange(key, queryRange)) {\n                        includedPKs.addKey(pk);\n                        includedValues.push(value);\n                    }\n                }\n            }\n            switch (op.type) {\n                case 'add': {\n                    var existingKeys_1 = new RangeSet().addKeys(req.values ? result.map(function (v) { return extractPrimKey(v); }) : result);\n                    modifedResult = result.concat(req.values\n                        ? includedValues.filter(function (v) {\n                            var key = extractPrimKey(v);\n                            if (existingKeys_1.hasKey(key))\n                                return false;\n                            existingKeys_1.addKey(key);\n                            return true;\n                        })\n                        : includedValues\n                            .map(function (v) { return extractPrimKey(v); })\n                            .filter(function (k) {\n                            if (existingKeys_1.hasKey(k))\n                                return false;\n                            existingKeys_1.addKey(k);\n                            return true;\n                        }));\n                    break;\n                }\n                case 'put': {\n                    var keySet_1 = new RangeSet().addKeys(op.values.map(function (v) { return extractPrimKey(v); }));\n                    modifedResult = result\n                        .filter(\n                    function (item) { return !keySet_1.hasKey(req.values ? extractPrimKey(item) : item); })\n                        .concat(\n                    req.values\n                        ? includedValues\n                        : includedValues.map(function (v) { return extractPrimKey(v); }));\n                    break;\n                }\n                case 'delete':\n                    var keysToDelete_1 = new RangeSet().addKeys(op.keys);\n                    modifedResult = result.filter(function (item) {\n                        return !keysToDelete_1.hasKey(req.values ? extractPrimKey(item) : item);\n                    });\n                    break;\n                case 'deleteRange':\n                    var range_1 = op.range;\n                    modifedResult = result.filter(function (item) { return !isWithinRange(extractPrimKey(item), range_1); });\n                    break;\n            }\n            return modifedResult;\n        }, result);\n        if (finalResult === result)\n            return result;\n        finalResult.sort(function (a, b) {\n            return cmp(extractLowLevelIndex(a), extractLowLevelIndex(b)) ||\n                cmp(extractPrimKey(a), extractPrimKey(b));\n        });\n        if (req.limit && req.limit < Infinity) {\n            if (finalResult.length > req.limit) {\n                finalResult.length = req.limit;\n            }\n            else if (result.length === req.limit && finalResult.length < req.limit) {\n                cacheEntry.dirty = true;\n            }\n        }\n        return immutable ? Object.freeze(finalResult) : finalResult;\n    }\n\n    function areRangesEqual(r1, r2) {\n        return (cmp(r1.lower, r2.lower) === 0 &&\n            cmp(r1.upper, r2.upper) === 0 &&\n            !!r1.lowerOpen === !!r2.lowerOpen &&\n            !!r1.upperOpen === !!r2.upperOpen);\n    }\n\n    function compareLowers(lower1, lower2, lowerOpen1, lowerOpen2) {\n        if (lower1 === undefined)\n            return lower2 !== undefined ? -1 : 0;\n        if (lower2 === undefined)\n            return 1;\n        var c = cmp(lower1, lower2);\n        if (c === 0) {\n            if (lowerOpen1 && lowerOpen2)\n                return 0;\n            if (lowerOpen1)\n                return 1;\n            if (lowerOpen2)\n                return -1;\n        }\n        return c;\n    }\n    function compareUppers(upper1, upper2, upperOpen1, upperOpen2) {\n        if (upper1 === undefined)\n            return upper2 !== undefined ? 1 : 0;\n        if (upper2 === undefined)\n            return -1;\n        var c = cmp(upper1, upper2);\n        if (c === 0) {\n            if (upperOpen1 && upperOpen2)\n                return 0;\n            if (upperOpen1)\n                return -1;\n            if (upperOpen2)\n                return 1;\n        }\n        return c;\n    }\n    function isSuperRange(r1, r2) {\n        return (compareLowers(r1.lower, r2.lower, r1.lowerOpen, r2.lowerOpen) <= 0 &&\n            compareUppers(r1.upper, r2.upper, r1.upperOpen, r2.upperOpen) >= 0);\n    }\n\n    function findCompatibleQuery(dbName, tableName, type, req) {\n        var tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(tableName)];\n        if (!tblCache)\n            return [];\n        var queries = tblCache.queries[type];\n        if (!queries)\n            return [null, false, tblCache, null];\n        var indexName = req.query ? req.query.index.name : null;\n        var entries = queries[indexName || ''];\n        if (!entries)\n            return [null, false, tblCache, null];\n        switch (type) {\n            case 'query':\n                var equalEntry = entries.find(function (entry) {\n                    return entry.req.limit === req.limit &&\n                        entry.req.values === req.values &&\n                        areRangesEqual(entry.req.query.range, req.query.range);\n                });\n                if (equalEntry)\n                    return [\n                        equalEntry,\n                        true,\n                        tblCache,\n                        entries,\n                    ];\n                var superEntry = entries.find(function (entry) {\n                    var limit = 'limit' in entry.req ? entry.req.limit : Infinity;\n                    return (limit >= req.limit &&\n                        (req.values ? entry.req.values : true) &&\n                        isSuperRange(entry.req.query.range, req.query.range));\n                });\n                return [superEntry, false, tblCache, entries];\n            case 'count':\n                var countQuery = entries.find(function (entry) {\n                    return areRangesEqual(entry.req.query.range, req.query.range);\n                });\n                return [countQuery, !!countQuery, tblCache, entries];\n        }\n    }\n\n    function subscribeToCacheEntry(cacheEntry, container, requery, signal) {\n        cacheEntry.subscribers.add(requery);\n        signal.addEventListener(\"abort\", function () {\n            cacheEntry.subscribers.delete(requery);\n            if (cacheEntry.subscribers.size === 0) {\n                enqueForDeletion(cacheEntry, container);\n            }\n        });\n    }\n    function enqueForDeletion(cacheEntry, container) {\n        setTimeout(function () {\n            if (cacheEntry.subscribers.size === 0) {\n                delArrayItem(container, cacheEntry);\n            }\n        }, 3000);\n    }\n\n    var cacheMiddleware = {\n        stack: 'dbcore',\n        level: 0,\n        name: 'Cache',\n        create: function (core) {\n            var dbName = core.schema.name;\n            var coreMW = __assign(__assign({}, core), { transaction: function (stores, mode, options) {\n                    var idbtrans = core.transaction(stores, mode, options);\n                    if (mode === 'readwrite') {\n                        var ac_1 = new AbortController();\n                        var signal = ac_1.signal;\n                        var endTransaction = function (wasCommitted) { return function () {\n                            ac_1.abort();\n                            if (mode === 'readwrite') {\n                                var affectedSubscribers_1 = new Set();\n                                for (var _i = 0, stores_1 = stores; _i < stores_1.length; _i++) {\n                                    var storeName = stores_1[_i];\n                                    var tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(storeName)];\n                                    if (tblCache) {\n                                        var table = core.table(storeName);\n                                        var ops = tblCache.optimisticOps.filter(function (op) { return op.trans === idbtrans; });\n                                        if (idbtrans._explicit && wasCommitted && idbtrans.mutatedParts) {\n                                            for (var _a = 0, _b = Object.values(tblCache.queries.query); _a < _b.length; _a++) {\n                                                var entries = _b[_a];\n                                                for (var _c = 0, _d = entries.slice(); _c < _d.length; _c++) {\n                                                    var entry = _d[_c];\n                                                    if (obsSetsOverlap(entry.obsSet, idbtrans.mutatedParts)) {\n                                                        delArrayItem(entries, entry);\n                                                        entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });\n                                                    }\n                                                }\n                                            }\n                                        }\n                                        else if (ops.length > 0) {\n                                            tblCache.optimisticOps = tblCache.optimisticOps.filter(function (op) { return op.trans !== idbtrans; });\n                                            for (var _e = 0, _f = Object.values(tblCache.queries.query); _e < _f.length; _e++) {\n                                                var entries = _f[_e];\n                                                for (var _g = 0, _h = entries.slice(); _g < _h.length; _g++) {\n                                                    var entry = _h[_g];\n                                                    if (entry.res != null &&\n                                                        idbtrans.mutatedParts\n    ) {\n                                                        if (wasCommitted && !entry.dirty) {\n                                                            var freezeResults = Object.isFrozen(entry.res);\n                                                            var modRes = applyOptimisticOps(entry.res, entry.req, ops, table, entry, freezeResults);\n                                                            if (entry.dirty) {\n                                                                delArrayItem(entries, entry);\n                                                                entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });\n                                                            }\n                                                            else if (modRes !== entry.res) {\n                                                                entry.res = modRes;\n                                                                entry.promise = DexiePromise.resolve({ result: modRes });\n                                                            }\n                                                        }\n                                                        else {\n                                                            if (entry.dirty) {\n                                                                delArrayItem(entries, entry);\n                                                            }\n                                                            entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });\n                                                        }\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                affectedSubscribers_1.forEach(function (requery) { return requery(); });\n                            }\n                        }; };\n                        idbtrans.addEventListener('abort', endTransaction(false), {\n                            signal: signal,\n                        });\n                        idbtrans.addEventListener('error', endTransaction(false), {\n                            signal: signal,\n                        });\n                        idbtrans.addEventListener('complete', endTransaction(true), {\n                            signal: signal,\n                        });\n                    }\n                    return idbtrans;\n                }, table: function (tableName) {\n                    var downTable = core.table(tableName);\n                    var primKey = downTable.schema.primaryKey;\n                    var tableMW = __assign(__assign({}, downTable), { mutate: function (req) {\n                            var trans = PSD.trans;\n                            if (primKey.outbound ||\n                                trans.db._options.cache === 'disabled' ||\n                                trans.explicit ||\n                                trans.idbtrans.mode !== 'readwrite'\n                            ) {\n                                return downTable.mutate(req);\n                            }\n                            var tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(tableName)];\n                            if (!tblCache)\n                                return downTable.mutate(req);\n                            var promise = downTable.mutate(req);\n                            if ((req.type === 'add' || req.type === 'put') && (req.values.length >= 50 || getEffectiveKeys(primKey, req).some(function (key) { return key == null; }))) {\n                                promise.then(function (res) {\n                                    var reqWithResolvedKeys = __assign(__assign({}, req), { values: req.values.map(function (value, i) {\n                                            var _a;\n                                            if (res.failures[i])\n                                                return value;\n                                            var valueWithKey = ((_a = primKey.keyPath) === null || _a === void 0 ? void 0 : _a.includes('.'))\n                                                ? deepClone(value)\n                                                : __assign({}, value);\n                                            setByKeyPath(valueWithKey, primKey.keyPath, res.results[i]);\n                                            return valueWithKey;\n                                        }) });\n                                    var adjustedReq = adjustOptimisticFromFailures(tblCache, reqWithResolvedKeys, res);\n                                    tblCache.optimisticOps.push(adjustedReq);\n                                    queueMicrotask(function () { return req.mutatedParts && signalSubscribersLazily(req.mutatedParts); });\n                                });\n                            }\n                            else {\n                                tblCache.optimisticOps.push(req);\n                                req.mutatedParts && signalSubscribersLazily(req.mutatedParts);\n                                promise.then(function (res) {\n                                    if (res.numFailures > 0) {\n                                        delArrayItem(tblCache.optimisticOps, req);\n                                        var adjustedReq = adjustOptimisticFromFailures(tblCache, req, res);\n                                        if (adjustedReq) {\n                                            tblCache.optimisticOps.push(adjustedReq);\n                                        }\n                                        req.mutatedParts && signalSubscribersLazily(req.mutatedParts);\n                                    }\n                                });\n                                promise.catch(function () {\n                                    delArrayItem(tblCache.optimisticOps, req);\n                                    req.mutatedParts && signalSubscribersLazily(req.mutatedParts);\n                                });\n                            }\n                            return promise;\n                        }, query: function (req) {\n                            var _a;\n                            if (!isCachableContext(PSD, downTable) || !isCachableRequest(\"query\", req))\n                                return downTable.query(req);\n                            var freezeResults = ((_a = PSD.trans) === null || _a === void 0 ? void 0 : _a.db._options.cache) === 'immutable';\n                            var _b = PSD, requery = _b.requery, signal = _b.signal;\n                            var _c = findCompatibleQuery(dbName, tableName, 'query', req), cacheEntry = _c[0], exactMatch = _c[1], tblCache = _c[2], container = _c[3];\n                            if (cacheEntry && exactMatch) {\n                                cacheEntry.obsSet = req.obsSet;\n                            }\n                            else {\n                                var promise = downTable.query(req).then(function (res) {\n                                    var result = res.result;\n                                    if (cacheEntry)\n                                        cacheEntry.res = result;\n                                    if (freezeResults) {\n                                        for (var i = 0, l = result.length; i < l; ++i) {\n                                            Object.freeze(result[i]);\n                                        }\n                                        Object.freeze(result);\n                                    }\n                                    else {\n                                        res.result = deepClone(result);\n                                    }\n                                    return res;\n                                }).catch(function (error) {\n                                    if (container && cacheEntry)\n                                        delArrayItem(container, cacheEntry);\n                                    return Promise.reject(error);\n                                });\n                                cacheEntry = {\n                                    obsSet: req.obsSet,\n                                    promise: promise,\n                                    subscribers: new Set(),\n                                    type: 'query',\n                                    req: req,\n                                    dirty: false,\n                                };\n                                if (container) {\n                                    container.push(cacheEntry);\n                                }\n                                else {\n                                    container = [cacheEntry];\n                                    if (!tblCache) {\n                                        tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(tableName)] = {\n                                            queries: {\n                                                query: {},\n                                                count: {},\n                                            },\n                                            objs: new Map(),\n                                            optimisticOps: [],\n                                            unsignaledParts: {}\n                                        };\n                                    }\n                                    tblCache.queries.query[req.query.index.name || ''] = container;\n                                }\n                            }\n                            subscribeToCacheEntry(cacheEntry, container, requery, signal);\n                            return cacheEntry.promise.then(function (res) {\n                                return {\n                                    result: applyOptimisticOps(res.result, req, tblCache === null || tblCache === void 0 ? void 0 : tblCache.optimisticOps, downTable, cacheEntry, freezeResults),\n                                };\n                            });\n                        } });\n                    return tableMW;\n                } });\n            return coreMW;\n        },\n    };\n\n    function vipify(target, vipDb) {\n        return new Proxy(target, {\n            get: function (target, prop, receiver) {\n                if (prop === 'db')\n                    return vipDb;\n                return Reflect.get(target, prop, receiver);\n            }\n        });\n    }\n\n    var Dexie$1 =  (function () {\n        function Dexie(name, options) {\n            var _this = this;\n            this._middlewares = {};\n            this.verno = 0;\n            var deps = Dexie.dependencies;\n            this._options = options = __assign({\n                addons: Dexie.addons, autoOpen: true,\n                indexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange, cache: 'cloned' }, options);\n            this._deps = {\n                indexedDB: options.indexedDB,\n                IDBKeyRange: options.IDBKeyRange\n            };\n            var addons = options.addons;\n            this._dbSchema = {};\n            this._versions = [];\n            this._storeNames = [];\n            this._allTables = {};\n            this.idbdb = null;\n            this._novip = this;\n            var state = {\n                dbOpenError: null,\n                isBeingOpened: false,\n                onReadyBeingFired: null,\n                openComplete: false,\n                dbReadyResolve: nop,\n                dbReadyPromise: null,\n                cancelOpen: nop,\n                openCanceller: null,\n                autoSchema: true,\n                PR1398_maxLoop: 3,\n                autoOpen: options.autoOpen,\n            };\n            state.dbReadyPromise = new DexiePromise(function (resolve) {\n                state.dbReadyResolve = resolve;\n            });\n            state.openCanceller = new DexiePromise(function (_, reject) {\n                state.cancelOpen = reject;\n            });\n            this._state = state;\n            this.name = name;\n            this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", \"close\", { ready: [promisableChain, nop] });\n            this.once = function (event, callback) {\n                var fn = function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    _this.on(event).unsubscribe(fn);\n                    callback.apply(_this, args);\n                };\n                return _this.on(event, fn);\n            };\n            this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {\n                return function (subscriber, bSticky) {\n                    Dexie.vip(function () {\n                        var state = _this._state;\n                        if (state.openComplete) {\n                            if (!state.dbOpenError)\n                                DexiePromise.resolve().then(subscriber);\n                            if (bSticky)\n                                subscribe(subscriber);\n                        }\n                        else if (state.onReadyBeingFired) {\n                            state.onReadyBeingFired.push(subscriber);\n                            if (bSticky)\n                                subscribe(subscriber);\n                        }\n                        else {\n                            subscribe(subscriber);\n                            var db_1 = _this;\n                            if (!bSticky)\n                                subscribe(function unsubscribe() {\n                                    db_1.on.ready.unsubscribe(subscriber);\n                                    db_1.on.ready.unsubscribe(unsubscribe);\n                                });\n                        }\n                    });\n                };\n            });\n            this.Collection = createCollectionConstructor(this);\n            this.Table = createTableConstructor(this);\n            this.Transaction = createTransactionConstructor(this);\n            this.Version = createVersionConstructor(this);\n            this.WhereClause = createWhereClauseConstructor(this);\n            this.on(\"versionchange\", function (ev) {\n                if (ev.newVersion > 0)\n                    console.warn(\"Another connection wants to upgrade database '\".concat(_this.name, \"'. Closing db now to resume the upgrade.\"));\n                else\n                    console.warn(\"Another connection wants to delete database '\".concat(_this.name, \"'. Closing db now to resume the delete request.\"));\n                _this.close({ disableAutoOpen: false });\n            });\n            this.on(\"blocked\", function (ev) {\n                if (!ev.newVersion || ev.newVersion < ev.oldVersion)\n                    console.warn(\"Dexie.delete('\".concat(_this.name, \"') was blocked\"));\n                else\n                    console.warn(\"Upgrade '\".concat(_this.name, \"' blocked by other connection holding version \").concat(ev.oldVersion / 10));\n            });\n            this._maxKey = getMaxKey(options.IDBKeyRange);\n            this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, _this._options.chromeTransactionDurability, parentTransaction); };\n            this._fireOnBlocked = function (ev) {\n                _this.on(\"blocked\").fire(ev);\n                connections\n                    .filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })\n                    .map(function (c) { return c.on(\"versionchange\").fire(ev); });\n            };\n            this.use(cacheExistingValuesMiddleware);\n            this.use(cacheMiddleware);\n            this.use(observabilityMiddleware);\n            this.use(virtualIndexMiddleware);\n            this.use(hooksMiddleware);\n            var vipDB = new Proxy(this, {\n                get: function (_, prop, receiver) {\n                    if (prop === '_vip')\n                        return true;\n                    if (prop === 'table')\n                        return function (tableName) { return vipify(_this.table(tableName), vipDB); };\n                    var rv = Reflect.get(_, prop, receiver);\n                    if (rv instanceof Table)\n                        return vipify(rv, vipDB);\n                    if (prop === 'tables')\n                        return rv.map(function (t) { return vipify(t, vipDB); });\n                    if (prop === '_createTransaction')\n                        return function () {\n                            var tx = rv.apply(this, arguments);\n                            return vipify(tx, vipDB);\n                        };\n                    return rv;\n                }\n            });\n            this.vip = vipDB;\n            addons.forEach(function (addon) { return addon(_this); });\n        }\n        Dexie.prototype.version = function (versionNumber) {\n            if (isNaN(versionNumber) || versionNumber < 0.1)\n                throw new exceptions.Type(\"Given version is not a positive number\");\n            versionNumber = Math.round(versionNumber * 10) / 10;\n            if (this.idbdb || this._state.isBeingOpened)\n                throw new exceptions.Schema(\"Cannot add version when database is open\");\n            this.verno = Math.max(this.verno, versionNumber);\n            var versions = this._versions;\n            var versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];\n            if (versionInstance)\n                return versionInstance;\n            versionInstance = new this.Version(versionNumber);\n            versions.push(versionInstance);\n            versions.sort(lowerVersionFirst);\n            versionInstance.stores({});\n            this._state.autoSchema = false;\n            return versionInstance;\n        };\n        Dexie.prototype._whenReady = function (fn) {\n            var _this = this;\n            return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise(function (resolve, reject) {\n                if (_this._state.openComplete) {\n                    return reject(new exceptions.DatabaseClosed(_this._state.dbOpenError));\n                }\n                if (!_this._state.isBeingOpened) {\n                    if (!_this._state.autoOpen) {\n                        reject(new exceptions.DatabaseClosed());\n                        return;\n                    }\n                    _this.open().catch(nop);\n                }\n                _this._state.dbReadyPromise.then(resolve, reject);\n            }).then(fn);\n        };\n        Dexie.prototype.use = function (_a) {\n            var stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;\n            if (name)\n                this.unuse({ stack: stack, name: name });\n            var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n            middlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });\n            middlewares.sort(function (a, b) { return a.level - b.level; });\n            return this;\n        };\n        Dexie.prototype.unuse = function (_a) {\n            var stack = _a.stack, name = _a.name, create = _a.create;\n            if (stack && this._middlewares[stack]) {\n                this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {\n                    return create ? mw.create !== create :\n                        name ? mw.name !== name :\n                            false;\n                });\n            }\n            return this;\n        };\n        Dexie.prototype.open = function () {\n            var _this = this;\n            return usePSD(globalPSD,\n            function () { return dexieOpen(_this); });\n        };\n        Dexie.prototype._close = function () {\n            this.on.close.fire(new CustomEvent('close'));\n            var state = this._state;\n            var idx = connections.indexOf(this);\n            if (idx >= 0)\n                connections.splice(idx, 1);\n            if (this.idbdb) {\n                try {\n                    this.idbdb.close();\n                }\n                catch (e) { }\n                this.idbdb = null;\n            }\n            if (!state.isBeingOpened) {\n                state.dbReadyPromise = new DexiePromise(function (resolve) {\n                    state.dbReadyResolve = resolve;\n                });\n                state.openCanceller = new DexiePromise(function (_, reject) {\n                    state.cancelOpen = reject;\n                });\n            }\n        };\n        Dexie.prototype.close = function (_a) {\n            var _b = _a === void 0 ? { disableAutoOpen: true } : _a, disableAutoOpen = _b.disableAutoOpen;\n            var state = this._state;\n            if (disableAutoOpen) {\n                if (state.isBeingOpened) {\n                    state.cancelOpen(new exceptions.DatabaseClosed());\n                }\n                this._close();\n                state.autoOpen = false;\n                state.dbOpenError = new exceptions.DatabaseClosed();\n            }\n            else {\n                this._close();\n                state.autoOpen = this._options.autoOpen ||\n                    state.isBeingOpened;\n                state.openComplete = false;\n                state.dbOpenError = null;\n            }\n        };\n        Dexie.prototype.delete = function (closeOptions) {\n            var _this = this;\n            if (closeOptions === void 0) { closeOptions = { disableAutoOpen: true }; }\n            var hasInvalidArguments = arguments.length > 0 && typeof arguments[0] !== 'object';\n            var state = this._state;\n            return new DexiePromise(function (resolve, reject) {\n                var doDelete = function () {\n                    _this.close(closeOptions);\n                    var req = _this._deps.indexedDB.deleteDatabase(_this.name);\n                    req.onsuccess = wrap(function () {\n                        _onDatabaseDeleted(_this._deps, _this.name);\n                        resolve();\n                    });\n                    req.onerror = eventRejectHandler(reject);\n                    req.onblocked = _this._fireOnBlocked;\n                };\n                if (hasInvalidArguments)\n                    throw new exceptions.InvalidArgument(\"Invalid closeOptions argument to db.delete()\");\n                if (state.isBeingOpened) {\n                    state.dbReadyPromise.then(doDelete);\n                }\n                else {\n                    doDelete();\n                }\n            });\n        };\n        Dexie.prototype.backendDB = function () {\n            return this.idbdb;\n        };\n        Dexie.prototype.isOpen = function () {\n            return this.idbdb !== null;\n        };\n        Dexie.prototype.hasBeenClosed = function () {\n            var dbOpenError = this._state.dbOpenError;\n            return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n        };\n        Dexie.prototype.hasFailed = function () {\n            return this._state.dbOpenError !== null;\n        };\n        Dexie.prototype.dynamicallyOpened = function () {\n            return this._state.autoSchema;\n        };\n        Object.defineProperty(Dexie.prototype, \"tables\", {\n            get: function () {\n                var _this = this;\n                return keys(this._allTables).map(function (name) { return _this._allTables[name]; });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Dexie.prototype.transaction = function () {\n            var args = extractTransactionArgs.apply(this, arguments);\n            return this._transaction.apply(this, args);\n        };\n        Dexie.prototype._transaction = function (mode, tables, scopeFunc) {\n            var _this = this;\n            var parentTransaction = PSD.trans;\n            if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n                parentTransaction = null;\n            var onlyIfCompatible = mode.indexOf('?') !== -1;\n            mode = mode.replace('!', '').replace('?', '');\n            var idbMode, storeNames;\n            try {\n                storeNames = tables.map(function (table) {\n                    var storeName = table instanceof _this.Table ? table.name : table;\n                    if (typeof storeName !== 'string')\n                        throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                    return storeName;\n                });\n                if (mode == \"r\" || mode === READONLY)\n                    idbMode = READONLY;\n                else if (mode == \"rw\" || mode == READWRITE)\n                    idbMode = READWRITE;\n                else\n                    throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n                if (parentTransaction) {\n                    if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n                        if (onlyIfCompatible) {\n                            parentTransaction = null;\n                        }\n                        else\n                            throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                    }\n                    if (parentTransaction) {\n                        storeNames.forEach(function (storeName) {\n                            if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                                if (onlyIfCompatible) {\n                                    parentTransaction = null;\n                                }\n                                else\n                                    throw new exceptions.SubTransaction(\"Table \" + storeName +\n                                        \" not included in parent transaction.\");\n                            }\n                        });\n                    }\n                    if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n                        parentTransaction = null;\n                    }\n                }\n            }\n            catch (e) {\n                return parentTransaction ?\n                    parentTransaction._promise(null, function (_, reject) { reject(e); }) :\n                    rejection(e);\n            }\n            var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n            return (parentTransaction ?\n                parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n                PSD.trans ?\n                    usePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :\n                    this._whenReady(enterTransaction));\n        };\n        Dexie.prototype.table = function (tableName) {\n            if (!hasOwn(this._allTables, tableName)) {\n                throw new exceptions.InvalidTable(\"Table \".concat(tableName, \" does not exist\"));\n            }\n            return this._allTables[tableName];\n        };\n        return Dexie;\n    }());\n\n    var symbolObservable = typeof Symbol !== \"undefined\" && \"observable\" in Symbol\n        ? Symbol.observable\n        : \"@@observable\";\n    var Observable =  (function () {\n        function Observable(subscribe) {\n            this._subscribe = subscribe;\n        }\n        Observable.prototype.subscribe = function (x, error, complete) {\n            return this._subscribe(!x || typeof x === \"function\" ? { next: x, error: error, complete: complete } : x);\n        };\n        Observable.prototype[symbolObservable] = function () {\n            return this;\n        };\n        return Observable;\n    }());\n\n    var domDeps;\n    try {\n        domDeps = {\n            indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n            IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n        };\n    }\n    catch (e) {\n        domDeps = { indexedDB: null, IDBKeyRange: null };\n    }\n\n    function liveQuery(querier) {\n        var hasValue = false;\n        var currentValue;\n        var observable = new Observable(function (observer) {\n            var scopeFuncIsAsync = isAsyncFunction(querier);\n            function execute(ctx) {\n                var wasRootExec = beginMicroTickScope();\n                try {\n                    if (scopeFuncIsAsync) {\n                        incrementExpectedAwaits();\n                    }\n                    var rv = newScope(querier, ctx);\n                    if (scopeFuncIsAsync) {\n                        rv = rv.finally(decrementExpectedAwaits);\n                    }\n                    return rv;\n                }\n                finally {\n                    wasRootExec && endMicroTickScope();\n                }\n            }\n            var closed = false;\n            var abortController;\n            var accumMuts = {};\n            var currentObs = {};\n            var subscription = {\n                get closed() {\n                    return closed;\n                },\n                unsubscribe: function () {\n                    if (closed)\n                        return;\n                    closed = true;\n                    if (abortController)\n                        abortController.abort();\n                    if (startedListening)\n                        globalEvents.storagemutated.unsubscribe(mutationListener);\n                },\n            };\n            observer.start && observer.start(subscription);\n            var startedListening = false;\n            var doQuery = function () { return execInGlobalContext(_doQuery); };\n            function shouldNotify() {\n                return obsSetsOverlap(currentObs, accumMuts);\n            }\n            var mutationListener = function (parts) {\n                extendObservabilitySet(accumMuts, parts);\n                if (shouldNotify()) {\n                    doQuery();\n                }\n            };\n            var _doQuery = function () {\n                if (closed ||\n                    !domDeps.indexedDB)\n                 {\n                    return;\n                }\n                accumMuts = {};\n                var subscr = {};\n                if (abortController)\n                    abortController.abort();\n                abortController = new AbortController();\n                var ctx = {\n                    subscr: subscr,\n                    signal: abortController.signal,\n                    requery: doQuery,\n                    querier: querier,\n                    trans: null\n                };\n                var ret = execute(ctx);\n                Promise.resolve(ret).then(function (result) {\n                    hasValue = true;\n                    currentValue = result;\n                    if (closed || ctx.signal.aborted) {\n                        return;\n                    }\n                    accumMuts = {};\n                    currentObs = subscr;\n                    if (!objectIsEmpty(currentObs) && !startedListening) {\n                        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);\n                        startedListening = true;\n                    }\n                    execInGlobalContext(function () { return !closed && observer.next && observer.next(result); });\n                }, function (err) {\n                    hasValue = false;\n                    if (!['DatabaseClosedError', 'AbortError'].includes(err === null || err === void 0 ? void 0 : err.name)) {\n                        if (!closed)\n                            execInGlobalContext(function () {\n                                if (closed)\n                                    return;\n                                observer.error && observer.error(err);\n                            });\n                    }\n                });\n            };\n            setTimeout(doQuery, 0);\n            return subscription;\n        });\n        observable.hasValue = function () { return hasValue; };\n        observable.getValue = function () { return currentValue; };\n        return observable;\n    }\n\n    var Dexie = Dexie$1;\n    props(Dexie, __assign(__assign({}, fullNameExceptions), {\n        delete: function (databaseName) {\n            var db = new Dexie(databaseName, { addons: [] });\n            return db.delete();\n        },\n        exists: function (name) {\n            return new Dexie(name, { addons: [] }).open().then(function (db) {\n                db.close();\n                return true;\n            }).catch('NoSuchDatabaseError', function () { return false; });\n        },\n        getDatabaseNames: function (cb) {\n            try {\n                return getDatabaseNames(Dexie.dependencies).then(cb);\n            }\n            catch (_a) {\n                return rejection(new exceptions.MissingAPI());\n            }\n        },\n        defineClass: function () {\n            function Class(content) {\n                extend(this, content);\n            }\n            return Class;\n        }, ignoreTransaction: function (scopeFunc) {\n            return PSD.trans ?\n                usePSD(PSD.transless, scopeFunc) :\n                scopeFunc();\n        }, vip: vip, async: function (generatorFn) {\n            return function () {\n                try {\n                    var rv = awaitIterator(generatorFn.apply(this, arguments));\n                    if (!rv || typeof rv.then !== 'function')\n                        return DexiePromise.resolve(rv);\n                    return rv;\n                }\n                catch (e) {\n                    return rejection(e);\n                }\n            };\n        }, spawn: function (generatorFn, args, thiz) {\n            try {\n                var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n                if (!rv || typeof rv.then !== 'function')\n                    return DexiePromise.resolve(rv);\n                return rv;\n            }\n            catch (e) {\n                return rejection(e);\n            }\n        },\n        currentTransaction: {\n            get: function () { return PSD.trans || null; }\n        }, waitFor: function (promiseOrFunction, optionalTimeout) {\n            var promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\n                Dexie.ignoreTransaction(promiseOrFunction) :\n                promiseOrFunction)\n                .timeout(optionalTimeout || 60000);\n            return PSD.trans ?\n                PSD.trans.waitFor(promise) :\n                promise;\n        },\n        Promise: DexiePromise,\n        debug: {\n            get: function () { return debug; },\n            set: function (value) {\n                setDebug(value);\n            }\n        },\n        derive: derive, extend: extend, props: props, override: override,\n        Events: Events, on: globalEvents, liveQuery: liveQuery, extendObservabilitySet: extendObservabilitySet,\n        getByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, cmp: cmp, asap: asap$1,\n        minKey: minKey,\n        addons: [],\n        connections: connections,\n        errnames: errnames,\n        dependencies: domDeps, cache: cache,\n        semVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')\n            .map(function (n) { return parseInt(n); })\n            .reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }) }));\n    Dexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);\n\n    if (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (updatedParts) {\n            if (!propagatingLocally) {\n                var event_1;\n                event_1 = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {\n                    detail: updatedParts\n                });\n                propagatingLocally = true;\n                dispatchEvent(event_1);\n                propagatingLocally = false;\n            }\n        });\n        addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, function (_a) {\n            var detail = _a.detail;\n            if (!propagatingLocally) {\n                propagateLocally(detail);\n            }\n        });\n    }\n    function propagateLocally(updateParts) {\n        var wasMe = propagatingLocally;\n        try {\n            propagatingLocally = true;\n            globalEvents.storagemutated.fire(updateParts);\n            signalSubscribersNow(updateParts, true);\n        }\n        finally {\n            propagatingLocally = wasMe;\n        }\n    }\n    var propagatingLocally = false;\n\n    var bc;\n    var createBC = function () { };\n    if (typeof BroadcastChannel !== 'undefined') {\n        createBC = function () {\n            bc = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);\n            bc.onmessage = function (ev) { return ev.data && propagateLocally(ev.data); };\n        };\n        createBC();\n        if (typeof bc.unref === 'function') {\n            bc.unref();\n        }\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {\n            if (!propagatingLocally) {\n                bc.postMessage(changedParts);\n            }\n        });\n    }\n\n    if (typeof addEventListener !== 'undefined') {\n        addEventListener('pagehide', function (event) {\n            if (!Dexie$1.disableBfCache && event.persisted) {\n                if (debug)\n                    console.debug('Dexie: handling persisted pagehide');\n                bc === null || bc === void 0 ? void 0 : bc.close();\n                for (var _i = 0, connections_1 = connections; _i < connections_1.length; _i++) {\n                    var db = connections_1[_i];\n                    db.close({ disableAutoOpen: false });\n                }\n            }\n        });\n        addEventListener('pageshow', function (event) {\n            if (!Dexie$1.disableBfCache && event.persisted) {\n                if (debug)\n                    console.debug('Dexie: handling persisted pageshow');\n                createBC();\n                propagateLocally({ all: new RangeSet(-Infinity, [[]]) });\n            }\n        });\n    }\n\n    function add(value) {\n        return new PropModification({ add: value });\n    }\n\n    function remove(value) {\n        return new PropModification({ remove: value });\n    }\n\n    function replacePrefix(a, b) {\n        return new PropModification({ replacePrefix: [a, b] });\n    }\n\n    DexiePromise.rejectionMapper = mapError;\n    setDebug(debug);\n\n    var namedExports = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        Dexie: Dexie$1,\n        liveQuery: liveQuery,\n        Entity: Entity,\n        cmp: cmp,\n        PropModification: PropModification,\n        replacePrefix: replacePrefix,\n        add: add,\n        remove: remove,\n        'default': Dexie$1,\n        RangeSet: RangeSet,\n        mergeRanges: mergeRanges,\n        rangesOverlap: rangesOverlap\n    });\n\n    __assign(Dexie$1, namedExports, { default: Dexie$1 });\n\n    return Dexie$1;\n\n}));\n//# sourceMappingURL=dexie.js.map\n","// Making the module version consumable via require - to prohibit\n// multiple occurrancies of the same module in the same app\n// (dual package hazard, https://nodejs.org/api/packages.html#dual-package-hazard)\nimport _Dexie from \"./dist/dexie.min.js\";\nconst DexieSymbol = Symbol.for(\"Dexie\");\nconst Dexie = globalThis[DexieSymbol] || (globalThis[DexieSymbol] = _Dexie);\nif (_Dexie.semVer !== Dexie.semVer) {\n    throw new Error(`Two different versions of Dexie loaded in the same app: ${_Dexie.semVer} and ${Dexie.semVer}`);\n}\nconst {\n    liveQuery, mergeRanges, rangesOverlap, RangeSet, cmp, Entity,\n    PropModification, replacePrefix, add, remove,\n    DexieYProvider } = Dexie;\nexport { liveQuery, mergeRanges, rangesOverlap, RangeSet, cmp, Dexie, Entity,\n    PropModification, replacePrefix, add, remove,\n    DexieYProvider};\nexport default Dexie;\n"],"names":["module","exports","s","e","t","Object","setPrototypeOf","__proto__","Array","n","prototype","hasOwnProperty","call","_","assign","r","arguments","length","i","apply","this","o","slice","concat","f","globalThis","self","window","global","O","keys","x","isArray","a","forEach","Promise","c","getPrototypeOf","m","Reflect","ownKeys","l","u","defineProperty","get","set","configurable","value","writable","from","create","extend","bind","h","getOwnPropertyDescriptor","d","b","p","y","Error","v","setImmediate","setTimeout","g","push","indexOf","substr","w","isFrozen","isNaN","parseInt","splice","k","P","split","map","filter","K","Set","E","S","WeakMap","has","constructor","j","toString","A","C","Symbol","iterator","T","I","q","D","next","done","B","toStringTag","F","R","M","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","N","name","message","L","join","U","failures","failedKeys","successCount","V","failuresByPos","z","reduce","W","Y","inner","Syntax","SyntaxError","Type","TypeError","Range","RangeError","$","Q","G","X","H","J","Z","onsuccess","onerror","ee","te","ne","re","then","ModifyError","DexieError","BulkError","ie","location","test","href","oe","ae","ue","resolve","crypto","subtle","digest","Uint8Array","se","ce","le","be","he","queueMicrotask","Se","fe","de","pe","ye","ve","id","ref","unhandleds","onunhandled","pgp","env","finalize","me","ge","we","_e","_listeners","_lib","_PSD","_state","_value","Oe","je","_then","Pe","Ae","xe","Fe","Ue","Ke","ke","Qe","_consoleTask","onFulfilled","onRejected","reject","psd","some","Ce","Ee","run","$e","Te","Ie","We","catch","finally","timeout","Timeout","clearTimeout","Ye","all","Ve","race","PSD","totalEchoes","newPSD","Ne","usePSD","scheduler","rejectionMapper","follow","allSettled","status","reason","any","AggregateError","withResolvers","qe","awaits","echoes","De","Be","Re","Me","parent","PromiseProp","Le","Xe","ze","pop","Ge","enqueueNativeMicroTask","He","String","fromCharCode","Je","Ze","et","tt","nt","rt","it","ot","type","lower","lowerOpen","upper","upperOpen","at","ut","st","ct","NaN","lt","ArrayBuffer","isView","buffer","byteOffset","byteLength","ft","schema","yProps","numFailures","updatesTable","db","table","where","anyOf","delete","clear","ht","dt","execute","add","sort","Number","BigInt","remove","includes","replacePrefix","startsWith","substring","pt","yt","vt","_trans","_tx","trans","console","createTask","NotFound","idbtrans","_novip","_promise","transless","idbdb","openComplete","letThrough","_vip","_createTransaction","_dbSchema","PR1398_maxLoop","InvalidState","isOpen","warn","close","disableAutoOpen","open","commit","_completion","dbOpenError","isBeingOpened","autoOpen","dbReadyPromise","trace","first","core","key","hook","reading","fire","WhereClause","equals","indexes","primKey","compound","every","keyPath","_maxKey","JSON","stringify","idxByName","multi","toCollection","and","count","offset","limit","each","toArray","Collection","orderBy","reverse","mapToClass","mappedClass","enumerable","getOwnPropertyNames","readHook","unsubscribe","defineClass","auto","mutate","values","lastResult","upsert","updates","changeSpecs","update","modify","InvalidArgument","put","range","bulkGet","getMany","bulkAdd","allKeys","wantResults","results","bulkPut","bulkUpdate","changes","cache","Constraint","bulkDelete","mt","subscribe","addEventType","subscribers","bt","gt","algorithm","or","justLimit","replayFilter","wt","_t","xt","isPrimKey","primaryKey","getIndexByKeyPath","index","Schema","kt","openCursor","keysOnly","dir","unique","query","Ot","stop","fail","_iterate","Pt","valueMapper","start","continue","Kt","Et","_read","_ctx","error","_write","_addAlgorithm","clone","raw","Math","min","sortBy","result","advance","until","last","isMatch","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","outbound","extractKey","_options","modifyChunkSize","St","criteria","changeSpec","isAdditionalChunk","jt","At","Ct","Bt","Tt","Dt","It","toUpperCase","toLowerCase","qt","Rt","between","_cmp","above","aboveOrEqual","below","belowOrEqual","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","_min","_max","startsWithAnyOf","Ft","Mt","target","stopPropagation","preventDefault","Nt","Lt","Ut","Vt","zt","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","shift","mode","OpenFailed","active","transaction","storeNames","durability","chromeTransactionDurability","_reject","onabort","on","oncomplete","_resolve","storagemutated","mutatedParts","ReadOnly","_root","waitFor","_waitingFor","_waitingQueue","objectStore","_spinCount","abort","_memoizedTables","Table","Wt","src","Yt","$t","Qt","only","Gt","Xt","Ht","Jt","Zt","upperBound","lowerBound","bound","_pos","isPrimaryKey","getAll","getAllKeys","openKeyCursor","___id","continuePrimaryKey","objectStoreNames","tables","autoIncrement","indexNames","multiEntry","hasGetAll","navigator","userAgent","match","stack","MIN_KEY","MAX_KEY","en","IDBKeyRange","indexedDB","dbcore","tn","_middlewares","_deps","nn","Transaction","rn","_cfg","version","an","contains","$meta","pn","_storeNames","_versions","hn","dbschema","dn","sn","cn","change","recreate","Upgrade","fn","deleteIndex","del","contentUpgrade","deleteObjectStore","ceil","ln","populate","un","createObjectStore","debug","def","createIndex","_hasGetAll","WorkerGlobalScope","trim","replace","yn","vn","_createTableSchema","_parseIndexSyntax","_parseStoresSpec","stores","storesSource","_allTables","upgrade","mn","_dbNamesDB","nr","addons","dbnames","bn","databases","gn","wn","_n","to","xn","Kn","kn","On","Pn","up","En","max","Sn","jn","addKey","addKeys","hasKey","An","Cn","Tn","In","qn","Dn","exec","entries","queries","obsSet","Bn","openCanceller","round","verno","autoSchema","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","deleteDatabase","NoSuchDatabase","oldVersion","pow","onversionchange","vcFired","onclose","dbReadyResolve","userAgentData","setInterval","clearInterval","onReadyBeingFired","ready","vip","_close","Rn","throw","Fn","Mn","level","lowLevelIndex","isVirtual","keyTail","keyLength","Nn","Ln","Un","deleting","creating","updating","Vn","zn","_cache","Wn","subscr","explicit","Yn","$n","querier","findIndex","Qn","Gn","Xn","dirty","freeze","Hn","Jn","Zn","addEventListener","size","er","AbortController","signal","optimisticOps","_explicit","res","req","promise","requery","find","objs","Map","unsignaledParts","tr","Proxy","rr","Version","_whenReady","use","unuse","CustomEvent","cancelOpen","backendDB","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","SubTransaction","PrematureCommit","InvalidTable","dependencies","once","complete","_IDBKeyRange","newVersion","observable","ir","ar","_subscribe","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","ur","closed","aborted","hasValue","getValue","sr","cr","fr","exists","getDatabaseNames","ignoreTransaction","async","spawn","currentTransaction","derive","props","override","Events","liveQuery","extendObservabilitySet","getByKeyPath","setByKeyPath","delByKeyPath","shallowClone","deepClone","getObjectDiff","cmp","asap","minKey","connections","errnames","semVer","maxKey","dispatchEvent","detail","lr","hr","BroadcastChannel","onmessage","data","unref","postMessage","disableBfCache","persisted","Dexie","Entity","PropModification","default","RangeSet","mergeRanges","rangesOverlap","DexieSymbol","for","_Dexie","DexieYProvider"],"sourceRoot":""}